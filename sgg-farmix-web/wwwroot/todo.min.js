angular.module("app").factory("consultarBovinoService",function(e,o){return e(o.getUrlServer()+"api/BovinoConsultar/",{},{inicializar:{method:"GET",url:o.getUrlServer()+"api/Bovino/inicializar/:idAmbitoEstado/:idCampo",headers:o.getHeadersServer(),params:{idAmbitoEstado:"@idAmbitoEstado",idCampo:"@idCampo"},isArray:!1},obtenerListaBovinos:{method:"GET",url:o.getUrlServer()+"api/BovinoConsultar/getListaBovinos",headers:o.getHeadersServer(),isArray:!0},validarCantBovinos:{method:"GET",url:o.getUrlServer()+"api/Bovino/verificarCantBovinosXAdmin",params:{usuario:"@usuario"},headers:o.getHeadersServer(),isArray:!1}})}),function(){"use strict";function e(e,o,r,a,i,n,t){var l=e;window.scrollTo(0,0),l.disabled="disabled",l.disabledExportar="disabled",l.inicializar=(e.$parent.blockSpinner(),l.disabled="disabled",l.disabledExportar="disabled",l.itemsPorPagina=9,void o.inicializar({idAmbitoEstado:"1",idCampo:i.usuarioInfo.codigoCampo},function(e){l.estados=e.estados,c=angular.copy(e.estados),l.categorias=e.categorias,s=angular.copy(e.categorias),l.razas=e.razas,l.rodeos=e.rodeos,l.establecimientos=e.establecimientos,l.filtro.idCategoria="0",l.filtro.genero="2",l.filtro.idRaza="0",l.filtro.idRodeo="0",l.filtro.idEstado="0",l.filtro.accionPeso="0",l.filtro.codigoCampo=i.usuarioInfo.codigoCampo,d()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})),l.consultar=d,l.limpiarCampos=function(){l.filtro={},l.filtro.idCategoria="0",l.filtro.genero="2",l.filtro.idRaza="0",l.filtro.idRodeo="0",l.filtro.idEstado="0",l.filtro.accionPeso="0",l.filtro.numCaravana="",l.filtro.codigoCampo=i.usuarioInfo.codigoCampo,d()},l.exportarExcel=function(){var o=[];o.Titulos=[],o.Titulos[0]="Nro Caravana",o.Titulos[1]="Categoría",o.Titulos[2]="Sexo",o.Titulos[3]="Raza",o.Titulos[4]="Rodeo",o.Titulos[5]="Estado",o.Titulos[6]="Acción Peso",o.Titulos[7]="Peso (Kg)";var i=[];i[0]="Nro Caravana",i[1]="Categoría",i[2]="Sexo",i[3]="Raza",i[4]="Rodeo",i[5]="Estado",i[6]="Peso (Kg)";var n=[];if(n[0]="numCaravana",n[1]="categoriaNombre",n[2]="sexo",n[3]="razaNombre",n[4]="rodeoNombre",n[5]="estadoNombre",n[6]="peso",l.rowCollection.length>0){var t=1;for(var c in void 0===l.filtro.numCaravana?o[0]="":o[0]=l.filtro.numCaravana,l.filtro){var s=typeof l.filtro[c];if((null===l.filtro[c]||"object"!==s)&&"$resolved"!==c&&"function"!==s&&"numCaravana"!==c)if("idCategoria"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.categorias.length;d++)if(l.filtro[c]===l.categorias[d].idCategoria||parseInt(l.filtro[c])===l.categorias[d].idCategoria){o[t]=l.categorias[d].nombre,t+=1;break}}else if("genero"===c)"2"===l.filtro[c]?(o[t]="Seleccione",t+=1):"0"===l.filtro[c]?(o[t]="Hembra",t+=1):(o[t]="Macho",t+=1);else if("idRaza"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.razas.length;d++)if(l.filtro[c]===l.razas[d].idRaza||parseInt(l.filtro[c])===l.razas[d].idRaza){o[t]=l.razas[d].nombre,t+=1;break}}else if("idRodeo"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.rodeos.length;d++)if(l.filtro[c]===l.rodeos[d].idRodeo||parseInt(l.filtro[c])===l.rodeos[d].idRodeo){o[t]=l.rodeos[d].nombre,t+=1;break}}else if("idEstado"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.estados.length;d++)if(l.filtro[c]===l.estados[d].idEstado||parseInt(l.filtro[c])===l.estados[d].idEstado){o[t]=l.estados[d].nombre,t+=1;break}}else"accionPeso"===c?"0"===l.filtro[c]?(o[t]="Seleccione",t+=1):"mayor"===l.filtro[c]?(o[t]="Mayor",t+=1):(o[t]="Menor",t+=1):(o[t]=e.filtro[c],t+=1)}void 0===l.filtro.peso&&(o[o.length]="");var p=new Date;p=u(p),a.exportarExcel("Bovinos"+p,l.rowCollection,i,o,n,"Bovinos",function(){r.success("Se ha exportado con Éxito","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.exportarPDF=function(){var o=[];o.Titulos=[],o.Titulos[0]="Nro Caravana",o.Titulos[1]="Categoría",o.Titulos[2]="Sexo",o.Titulos[3]="Raza",o.Titulos[4]="Rodeo",o.Titulos[5]="Estado",o.Titulos[6]="Acción Peso",o.Titulos[7]="Peso (Kg)";var i=[];if(i[0]="numCaravana",i[1]="categoriaNombre",i[2]="sexo",i[3]="razaNombre",i[4]="rodeoNombre",i[5]="estadoNombre",i[6]="peso",l.rowCollection.length>0){var n=1;for(var t in void 0===l.filtro.numCaravana?o[0]="":o[0]=l.filtro.numCaravana,l.filtro){var c=typeof l.filtro[t];if((null===l.filtro[t]||"object"!==c)&&"$resolved"!==t&&"function"!==c&&"numCaravana"!==t)if("idCategoria"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.categorias.length;s++)if(l.filtro[t]===l.categorias[s].idCategoria||parseInt(l.filtro[t])===l.categorias[s].idCategoria){o[n]=l.categorias[s].nombre,n+=1;break}}else if("genero"===t)"2"===l.filtro[t]?(o[n]="Seleccione",n+=1):"0"===l.filtro[t]?(o[n]="Hembra",n+=1):(o[n]="Macho",n+=1);else if("idRaza"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.razas.length;s++)if(l.filtro[t]===l.razas[s].idRaza||parseInt(l.filtro[t])===l.razas[s].idRaza){o[n]=l.razas[s].nombre,n+=1;break}}else if("idRodeo"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.rodeos.length;s++)if(l.filtro[t]===l.rodeos[s].idRodeo||parseInt(l.filtro[t])===l.rodeos[s].idRodeo){o[n]=l.rodeos[s].nombre,n+=1;break}}else if("idEstado"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.estados.length;s++)if(l.filtro[t]===l.estados[s].idEstado||parseInt(l.filtro[t])===l.estados[s].idEstado){o[n]=l.estados[s].nombre,n+=1;break}}else"accionPeso"===t?"0"===l.filtro[t]?(o[n]="Seleccione",n+=1):"mayor"===l.filtro[t]?(o[n]="Mayor",n+=1):(o[n]="Menor",n+=1):(o[n]=e.filtro[t],n+=1)}void 0===l.filtro.peso&&(o[o.length]="");var d=new Date;d=u(d);var p="<html><head></head><body>";if(p+="<h1 style='align:center;'>Bovinos</h1>",p+="<div><table border='1px' style='font-size:6px; width:6000px;'>",null!==l.filtro){for(var f="<thead><tr>",n=0;n<o.Titulos.length;n++)f+="<td bgcolor='black' style='text-align:center; vertical-align:center'><b><font color='white'>"+o.Titulos[n]+"</font></b></td>";f+="</tr></thead>";for(var m="<tr>",n=0;n<o.length;n++)if(null===o[n]||"object"!=typeof o[n]){var v=null!==o[n]?o[n]:"";m+="<td style='text-align:center; vertical-align:center'> "+v+" </td>"}m+="</tr></tbody>";var g=f.concat(m.toString()).concat("</table></div>");p+=g.toString()}p+="<div style='border-width: 2px; border-style: dotted; padding: 1em; font-size:120%;line-height: 1.5em;'><table border='1px' style='font-size:5px; width:6000px'>";var h="<thead><tr>";h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Nro Caravana</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Categoría</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Sexo</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Raza</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Rodeo</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Estado</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Peso</font></b></td>",h+="</tr></thead><tbody>";for(var m="<tr>",b=l.rowCollection,s=0;s<b.length;s++)for(var t in b[s]){if(!b[s].hasOwnProperty(t)||"$$hashKey"===t){m+="</tr>";break}if(i.indexOf(t)>-1){var v=""!==b[s][t]?b[s][t]:"";m+="<td style='text-align:center; vertical-align:center'> "+v+" </td>"}}p+="</tbody>";var S=h.concat(m.toString()).concat("</table></div>");p+=S.toString(),p+="</body></html>",a.exportarPDF("Bovinos"+d,p,function(){r.success("Se ha exportado con Éxito.","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.validarCantBovinos=function(){e.$parent.blockSpinner(),o.validarCantBovinos({usuario:n.usuarioInfo.usuario},function(o){o.resultado?t.go("home.registrarBovino"):(e.$parent.unBlockSpinner(),r.info("No puede agregar mas bovinos, verifique su plan contratado.","Aviso"))},function(e){r.error("Se ha producido un error, reintentar.")})},l.changeEstados=function(){if("1"===l.filtro.genero){l.estados=[];for(var e=0;e<c.length;e++)1!==c[e].genero&&2!==c[e].genero||l.estados.push(c[e])}else if("0"===l.filtro.genero){l.estados=[];for(var e=0;e<c.length;e++)0!==c[e].genero&&2!==c[e].genero||l.estados.push(c[e])}},l.changeCategorias=function(){if("1"===l.filtro.genero){l.categorias=[];for(var e=0;e<s.length;e++)1===s[e].genero&&l.categorias.push(s[e])}else if("0"===l.filtro.genero||0===l.filtro.genero){l.categorias=[];for(var e=0;e<s.length;e++)0===s[e].genero&&l.categorias.push(s[e])}else l.categorias=s},l.razas=[],l.estados=[],l.categorias=[],l.rodeos=[],l.establecimientos=[],l.filtro={},l.cursor="";var c=[],s=[];function d(){e.$parent.blockSpinner(),l.disabled="disabled",l.disabledExportar="disabled",""!==l.filtro.peso&&void 0!==l.filtro.peso||(l.filtro.peso=0),""!==l.filtro.numCaravana&&null!==l.filtro.numCaravana||(l.filtro.numCaravana=0),o.obtenerListaBovinos({filtro:angular.toJson(l.filtro,!1)},function(o){0===o.length?(l.disabledExportar="disabled",l.disabled="",l.rowCollection=[],l.filtro.peso="",r.info("No se ha encontrado ningún resultado para esta búsqueda","Aviso")):(l.rowCollection=o,0===l.filtro.peso&&(l.filtro.peso=""),0===l.filtro.numCaravana&&(l.filtro.numCaravana=""),l.disabled="",l.disabledExportar=""),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}function u(e){var o,r;return 1===(o=e.getDate().toString()).length&&(o="0"+o),1===(r=(e.getMonth()+1).toString()).length&&(r="0"+r),o+"/"+r+"/"+e.getFullYear().toString()}}angular.module("app").controller("consultarBovinoController",e),e.$inject=["$scope","consultarBovinoService","toastr","exportador","$localStorage","$sessionStorage","$state"]}(),function(){"use strict";function e(e,o){return{inicializar:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Bovino/initDetalle",params:{idBovino:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("detalleBovinoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a){var i=e;function n(){r.proviene&&("DetalleEvento"===r.proviene?i.volver="home.detalleEvento({id:"+r.evento+"})":"ModificarEvento"===r.proviene?i.volver="home.modificarEvento({id:"+r.evento+"})":"DetalleInseminacion"===r.proviene?i.volver='home.detalleInseminacion({fecha:"'+r.fecha+'", desde: "'+r.desde+'"})':"ModificarInseminacion"===r.proviene&&(i.volver='home.modificarInseminacion({fecha:"'+r.fecha+'", desde: "'+r.desde+'"})')),e.$parent.blockSpinner(),o.inicializar(r.id).then(function(o){i.checkH=!1,i.checkM=!1,i.bovino=o;var r=i.bovino.fechaNacimiento.substring(0,10).split("/");i.bovino.fechaNacimiento=new Date(r[2],parseInt(r[1]-1).toString(),r[0]),0===i.bovino.sexo?(i.checkH=!0,i.checkM=!1):(i.checkH=!1,i.checkM=!0),angular.forEach(i.bovino,function(e,o){0===parseInt(e)&&"idBovino"!==o&&(i.bovino[o]="")}),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})}window.scrollTo(0,0),i.inicializar=n,i.bovino={},i.checkH=!1,i.checkM=!1,i.volver="home.bovino",n()}angular.module("app").controller("detalleBovinoController",e),e.$inject=["$scope","detalleBovinoService","$stateParams","toastr"]}(),function(){"use strict";function e(e,o){return{inicializar:function(r,a){return e({method:"GET",url:o.getUrlServer()+"api/Bovino/initBaja",params:{idBovino:r,codigoCampo:a},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},bajaMuerte:function(r,a){return e({method:"PUT",url:o.getUrlServer()+"api/Bovino/darBajaMuerte",params:{idBovino:r,fechaMuerte:a},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},bajaVenta:function(r){return e({method:"POST",url:o.getUrlServer()+"api/Bovino/darBajaVenta",params:{venta:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("eliminarBovinoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i){var n=e;window.scrollTo(0,0),n.habilitar=!1,n.tiposEliminacion=[{id:"1",nombre:"Venta"},{id:"2",nombre:"Defunción"}],n.tipoEliminacionSeleccionada="1",n.eliminar=function(){e.$parent.blockSpinnerSave(),n.habilitar=!1,$("#modalConfirmEliminar").modal("hide"),"2"===n.tipoEliminacionSeleccionada?o.bajaMuerte(n.bovino.idBovino,n.bajaBovino.fechaMuerte).then(function(o){e.$parent.unBlockSpinnerSave(),n.btnVolver="Volver",a.success("Se dio de baja el bovino con éxito ","Éxito")},function(o){e.$parent.unBlockSpinnerSave(),a.error("La operación no se pudo completar","Error")}):(n.bajaBovino.monto=n.bajaBovino.monto.toString().replace(",","."),n.bajaBovino.idBovino=n.bovino.idBovino,o.bajaVenta(n.bajaBovino).then(function(o){e.$parent.unBlockSpinnerSave(),n.btnVolver="Volver",a.success("Se vendio el bovino con éxito ","Éxito")},function(o){e.$parent.unBlockSpinnerSave(),a.error("La operación no se pudo completar","Error")}))},n.inicializar=(e.$parent.blockSpinner(),void o.inicializar(r.id,i.usuarioInfo.codigoCampo).then(function(o){n.bovino=o,n.establecimientos=o.establecimientosDestino.establecimientos,e.$parent.unBlockSpinner(),n.habilitar=!0,n.nroCaravana=n.bovino.numCaravana,n.formEliminarBovino.fechaMuerte.$setValidity("min",!0),n.formEliminarBovino.fechaMuerte.$setValidity("max",!0),n.formEliminarBovino.fechaMuerte.$setValidity("required",!0),angular.forEach(n.bovino,function(e,o){0===parseInt(e)&&"idBovino"!==o&&(n.bovino[o]="")})},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})),n.getFecha=function(){n.bajaBovino.fechaMuerte=$("#datetimepicker7")[0].value;var e=new Date(n.bajaBovino.fechaMuerte.substring(6,10),parseInt(n.bajaBovino.fechaMuerte.substring(3,5))-1,n.bajaBovino.fechaMuerte.substring(0,2)),o=new Date,r=new Date(2e3,1,1);e>o?n.formEliminarBovino.fechaMuerte.$setValidity("max",!1):n.formEliminarBovino.fechaMuerte.$setValidity("max",!0);e<r?n.formEliminarBovino.fechaMuerte.$setValidity("min",!1):n.formEliminarBovino.fechaMuerte.$setValidity("min",!0)},n.cambiarModoBaja=function(){"1"===n.tipoEliminacionSeleccionada?(n.formEliminarBovino.fechaMuerte.$setValidity("min",!0),n.formEliminarBovino.fechaMuerte.$setValidity("max",!0),n.formEliminarBovino.fechaMuerte.$setValidity("required",!0)):(n.formEliminarBovino.establecimientoDestino.$setValidity("required",!0),n.formEliminarBovino.monto.$setValidity("required",!0),n.formEliminarBovino.monto.$setValidity("min",!0))},n.btnVolver="Cancelar",n.nroCaravana="",n.habilitar=!0,n.bajaBovino={},n.fechaDeHoy=new Date,$("#datetimepicker7").datetimepicker()}angular.module("app").controller("eliminarBovinoController",e),e.$inject=["$scope","eliminarBovinoService","$stateParams","toastr","$localStorage"]}(),function(){"use strict";function e(e,o){return{inicializar:function(r,a){return e({method:"GET",url:o.getUrlServer()+"api/Bovino/initModificacion",params:{idBovino:r,idCampo:a},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},modificar:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Bovino",params:{value:r},headers:o.getHeadersServer()})},existeIdCaravana:function(r,a){return e({method:"GET",url:o.getUrlServer()+"api/Bovino/existeIdCaravana",params:{idCaravana:r,codigoCampo:a,codigoCampo:a},headers:o.getHeadersServer(),isArray:!1}).then(function(e){return e.data||[]})}}}angular.module("app").factory("modificarBovinoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n,t,l,c,s,d,u,p){var f=e;window.scrollTo(0,0),f.habilitar=!1,f.modificar=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.bovino.peso=f.bovino.peso.toString().replace(",","."),f.bovino.pesoAlNacer=f.bovino.pesoAlNacer.toString().replace(",","."),(""===f.bovino.pesoAlNacer||void 0===f.bovino.pesoAlNacer)&&(f.bovino.pesoAlNacer=0);""!==f.bovino.idBovinoMadre&&void 0!==f.bovino.idBovinoMadre||(f.bovino.idBovinoMadre=0);""!==f.bovino.idBovinoPadre&&void 0!==f.bovino.idBovinoPadre||(f.bovino.idBovinoPadre=0);""!==f.bovino.idEstablecimientoOrigen&&void 0!==f.bovino.idEstablecimientoOrigen||(f.bovino.idEstablecimientoOrigen=0);!0===f.checkH?f.bovino.genero=0:!0===f.checkM&&(f.bovino.genero=1);f.bovino.codigoCampo=i.usuarioInfo.codigoCampo,o.modificar(f.bovino).then(function(o){0!==f.bovino.pesoAlNacer&&void 0!==f.bovino.pesoAlNacer||(f.bovino.pesoAlNacer=""),0!==f.bovino.idBovinoMadre&&void 0!==f.bovino.idBovinoMadre||(f.bovino.idBovinoMadre=""),0!==f.bovino.idBovinoPadre&&void 0!==f.bovino.idBovinoPadre||(f.bovino.idBovinoPadre=""),0!==f.bovino.idEstablecimientoOrigen&&void 0!==f.bovino.idEstablecimientoOrigen||(f.bovino.idEstablecimientoOrigen=""),e.$parent.unBlockSpinnerSave(),r.success("Se modificó el bovino con éxito ","Éxito")},function(o){e.$parent.unBlockSpinnerSave(),r.error("La operación no se pudo completar","Error")})},f.inicializar=b(),f.cambiarSexo=function(){if(f.categorias=[],!0===f.checkH){f.checkH=!1,f.checkM=!0;for(var e=0;e<m.length;e++)1===m[e].genero&&f.categorias.push(m[e])}else{f.checkH=!0,f.checkM=!1;for(var o=0;o<m.length;o++)0===m[o].genero&&f.categorias.push(m[o])}},f.idCaravanaChange=function(){f.bovino.numCaravana!==v?(e.$parent.blockSpinner(),f.habilitar=!1,o.existeIdCaravana(f.bovino.numCaravana,i.usuarioInfo.codigoCampo).then(function(o){"1"===o[0]?f.formModificarBovino.idCaravana.$setValidity("existeIdCaravana",!1):f.formModificarBovino.idCaravana.$setValidity("existeIdCaravana",!0),e.$parent.unBlockSpinner(),f.habilitar=!0},function(o){e.$parent.unBlockSpinner(),r.error("La operación no se pudo completar","Error")})):f.bovino.numCaravana===v&&f.formModificarBovino.idCaravana.$setValidity("existeIdCaravana",!0)},f.getFecha=function(){f.bovino.fechaNacimiento=$("#datetimepicker4")[0].value;var e=new Date(f.bovino.fechaNacimiento.substring(6,10),parseInt(f.bovino.fechaNacimiento.substring(3,5))-1,f.bovino.fechaNacimiento.substring(0,2)),o=new Date,r=new Date(2e3,1,1);e>o?f.formModificarBovino.fechaNac.$setValidity("max",!1):f.formModificarBovino.fechaNac.$setValidity("max",!0);e<r?f.formModificarBovino.fechaNac.$setValidity("min",!1):f.formModificarBovino.fechaNac.$setValidity("min",!0)},f.getPeso=function(){f.maxCantidad=(12*f.bovino.peso/100).toFixed(2),f.showCantAlimentoOptima=!0},f.cargarProvinciasyLocalidades=function(){e.$parent.blockSpinner(),u.cargarProvinciasyLocalidades({},function(o){f.provincias=o.provincias,h=o.localidades,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},f.getLocalidades=function(){f.localidades=Enumerable.From(h).Where(function(e){return e.idProvincia===parseInt(f.establecimiento.idProvincia)}).ToArray()},f.agregarEstabOrigen=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.establecimiento.codigoCampo=i.usuarioInfo.codigoCampo,f.establecimiento.$save(function(o){r.success("Se agrego con éxito el establecimiento origen ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoEstablecimiento").modal("hide"),p.reload()},function(o){e.$parent.unBlockSpinnerSave(),f.habilitar=!0,"Establecimiento Origen ya existe"===o.statusText?r.warning("El establecimiento origen que intenta registrar, ya existe en este campo","Advertencia"):r.error("La operación no se pudo completar","Error")})},f.agregarRodeo=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.rodeo.idCampo=i.usuarioInfo.codigoCampo,f.rodeo.$save(function(o){r.success("Se agrego con éxito el rodeo","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoRodeo").modal("hide"),p.reload()},function(o){e.$parent.unBlockSpinnerSave(),f.habilitar=!0,"Rodeo ya existe"===o.statusText?r.warning("El rodeo que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},f.agregarEstado=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.estado.codigoCampo=i.usuarioInfo.codigoCampo,f.estado.$save(function(o){r.success("Se agrego con éxito el estado ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoEstado").modal("hide"),p.reload()},function(o){e.$parent.unBlockSpinnerSave(),f.habilitar=!0,"Estado ya existe"===o.statusText?r.warning("El estado que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},f.agregarCategoria=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.categoria.codigoCampo=i.usuarioInfo.codigoCampo,f.categoria.$save(function(o){r.success("Se agrego con éxito la categoría ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoCategoria").modal("hide"),p.reload()},function(o){e.$parent.unBlockSpinnerSave(),f.habilitar=!0,"Categoria ya existe"===o.statusText?r.warning("La categoría que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},f.agregarRaza=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.raza.codigoCampo=i.usuarioInfo.codigoCampo,f.raza.$save(function(o){r.success("Se agrego con éxito el alimento ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoRaza").modal("hide"),p.reload()},function(o){e.$parent.unBlockSpinnerSave(),f.habilitar=!0,"Raza ya existe"===o.statusText?r.warning("La raza que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},f.agregarAlimento=function(){e.$parent.blockSpinnerSave(),f.habilitar=!1,f.alimento.codigoCampo=i.usuarioInfo.codigoCampo,f.alimento.$save(function(o){r.success("Se agrego con éxito el establecimiento origen ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoAlimento").modal("hide"),p.reload()},function(o){e.$parent.unBlockSpinnerSave(),f.habilitar=!0,"Alimento ya existe"===o.statusText?r.warning("El alimento que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},f.changeEstados=function(){if("1"===f.bovino.genero||1===f.bovino.genero){f.estados=[];for(var e=0;e<g.length;e++)1!==g[e].genero&&2!==g[e].genero||f.estados.push(g[e])}else if("0"===f.bovino.genero||0===f.bovino.genero){f.estados=[];for(var e=0;e<g.length;e++)0!==g[e].genero&&2!==g[e].genero||f.estados.push(g[e])}},f.changeEstadosXEnfermo=function(){if(1===f.bovino.enfermo){f.estados=[];for(var e=0;e<g.length;e++)1!==g[e].idEstado&&f.estados.push(g[e]);f.bovino.idEstado="3"}else f.estados=g,"3"===f.bovino.idEstado&&(f.bovino.idEstado="")},f.razas=[],f.estados=[],f.categorias=[],f.bovino={},f.fechaDeHoy=new Date;var m=[],v=0,g=[];f.inicializar=b,f.btnVolver="Volver",f.checkH=!1,f.checkM=!1,f.establecimiento=new n,f.rodeo=new t,f.estado=new l,f.categoria=new c,f.raza=new s,f.alimento=new d,$("#datetimepicker4").datetimepicker(),f.maxCantidad=0;var h=[];function b(){e.$parent.blockSpinner(),f.habilitar=!1,o.inicializar(a.id,i.usuarioInfo.codigoCampo).then(function(o){f.categorias=[],f.habilitar=!1;for(var r=0;r<o.estados.length;r++)4!==o.estados[r].idEstado&&5!==o.estados[r].idEstado||o.estados.splice(r,1);if(f.estados=o.estados,g=angular.copy(o.estados),m=o.categorias,f.razas=o.razas,f.rodeos=o.rodeos,f.establecimientos=o.establecimientos,f.alimentos=o.alimentos,f.bovino=o.bovino,v=f.bovino.numCaravana,f.bovino.fechaNacimiento=f.bovino.fechaNacimiento.substring(0,10),0===f.bovino.genero){f.checkH=!0,f.checkM=!1;for(r=0;r<m.length;r++)0===m[r].genero&&f.categorias.push(m[r])}else{f.checkH=!1,f.checkM=!0;for(r=0;r<m.length;r++)1===m[r].genero&&f.categorias.push(m[r])}f.bovino.idRaza=o.bovino.idRaza.toString(),f.bovino.idCategoria=o.bovino.idCategoria.toString(),f.bovino.idEstado=o.bovino.idEstado.toString(),f.bovino.idRodeo=o.bovino.idRodeo.toString(),f.bovino.idAlimento=o.bovino.idAlimento.toString(),f.maxCantidad=(12*f.bovino.peso/100).toFixed(2),f.showCantAlimentoOptima=!0,0!=o.bovino.idEstablecimientoOrigen?f.bovino.idEstablecimientoOrigen=o.bovino.idEstablecimientoOrigen.toString():f.bovino.idEstablecimientoOrigen="",f.changeEstados(),angular.forEach(f.bovino,function(e,o){0===parseInt(e)&&"idBovino"!==o&&"idAlimento"!==o&&"cantAlimento"!==o&&(f.bovino[o]="")}),e.$parent.unBlockSpinner(),f.habilitar=!0},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}f.showCantAlimentoOptima=!1}angular.module("app").controller("modificarBovinoController",e),e.$inject=["$scope","modificarBovinoService","toastr","$stateParams","$localStorage","establecimientoOrigenService","rodeoService","estadoService","categoriaService","razaService","alimentoService","registrarBovinoService","$state"]}(),angular.module("app").factory("registrarBovinoService",function(e,o){return e(o.getUrlServer()+"api/Bovino/",{},{inicializar:{method:"GET",url:o.getUrlServer()+"api/Bovino/inicializar/:idAmbitoEstado/:idCampo",params:{idAmbitoEstado:"@idAmbitoEstado",idCampo:"@idCampo"},headers:o.getHeadersServer(),isArray:!1},save:{method:"POST",headers:o.getHeadersServer()},existeIdCaravana:{method:"GET",url:o.getUrlServer()+"api/Bovino/existeIdCaravana/:idCaravana/:codigoCampo",headers:o.getHeadersServer(),params:{idCaravana:"@idCaravana",codigoCampo:"@codigoCampo"},isArray:!1},cargarProvinciasyLocalidades:{method:"GET",url:o.getUrlServer()+"api/Bovino/cargarProvinciasAndLoc",headers:o.getHeadersServer(),isArray:!1}})}),function(){"use strict";function e(e,o,r,a,i,n,t,l,c,s,d,u){var p=e;window.scrollTo(0,0),p.habilitar=!1,p.razas=[],p.estados=[],p.categorias=[],p.rodeos=[],p.establecimientos=[],p.alimentos=[],p.bovino={},p.fechaDeHoy=new Date,p.btnVolver="Cancelar",p.habilitar=!0,p.showMjeSuccess=!1,p.showMjeError=!1,p.mjeExiste="",p.maxCantidad=0,p.establecimiento=new r,p.rodeo=new a,p.estado=new i,p.categoria=new n,p.raza=new t,p.alimento=new l;var f=[],m=[],v=[];function g(){if("1"===p.bovino.genero||1===p.bovino.genero){p.estados=[];for(var e=0;e<v.length;e++)1!==v[e].genero&&2!==v[e].genero||p.estados.push(v[e])}else if("0"===p.bovino.genero||0===p.bovino.genero){p.estados=[];for(e=0;e<v.length;e++)0!==v[e].genero&&2!==v[e].genero||p.estados.push(v[e])}}$("#datetimepicker4").datetimepicker(),p.showCantAlimentoOptima=!1,p.registrar=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.bovino.peso=p.bovino.peso.toString().replace(",","."),void 0!==p.bovino.pesoAlNacer&&""!==p.bovino.pesoAlNacer&&(p.bovino.pesoAlNacer=p.bovino.pesoAlNacer.toString().replace(",","."));p.bovino.usuario=u.usuarioInfo.usuario,p.bovino.codigoCampo=d.usuarioInfo.codigoCampo,p.bovino.$save(function(o){c.success("Se agrego con éxito el bovino ","Éxito"),p.btnVolver="Volver",e.$parent.unBlockSpinnerSave()},function(o){if(e.$parent.unBlockSpinnerSave(),p.habilitar=!1,"Bovino ya existe"===o.statusText){c.warning("Ya existe un bovino con ese número de caravana","Advertencia");var r=p.bovino.fechaNacimiento.split("/");p.bovino.fechaNacimiento=new Date(r[2],r[1],r[0])}else c.error("La operación no se pudo completar","Error")})},p.inicializar=(p.habilitar=!1,void o.inicializar({idAmbitoEstado:"1",idCampo:d.usuarioInfo.codigoCampo},function(r){for(var a=0;a<r.estados.length;a++)4!==r.estados[a].idEstado&&5!==r.estados[a].idEstado||r.estados.splice(a,1);p.estados=r.estados,v=angular.copy(r.estados),p.categorias=r.categorias,f=angular.copy(r.categorias),p.razas=r.razas,p.rodeos=r.rodeos,p.establecimientos=r.establecimientos,p.alimentos=r.alimentos,e.$parent.unBlockSpinner(),p.habilitar=!0,p.bovino=new o,p.bovino.genero=0,p.rodeo.confinado=0,p.changeCategorias(),g()},function(o){e.$parent.unBlockSpinner(),c.error("Ha ocurrido un error, reintentar","Error")})),p.idCaravanaChange=function(){p.bovino.numCaravana&&(e.$parent.blockSpinner(),p.habilitar=!1,o.existeIdCaravana({idCaravana:p.bovino.numCaravana,codigoCampo:d.usuarioInfo.codigoCampo},function(o){"1"===o[0]?p.formRegistrarBovino.idCaravana.$setValidity("existeIdCaravana",!1):p.formRegistrarBovino.idCaravana.$setValidity("existeIdCaravana",!0),e.$parent.unBlockSpinner(),p.habilitar=!0},function(o){e.$parent.unBlockSpinner(),c.error("La operación no se pudo completar","Error")}))},p.getFecha=function(){p.bovino.fechaNacimiento=$("#datetimepicker4")[0].value;var e=new Date(p.bovino.fechaNacimiento.substring(6,10),parseInt(p.bovino.fechaNacimiento.substring(3,5))-1,p.bovino.fechaNacimiento.substring(0,2)),o=new Date,r=new Date(2e3,1,1);e>o?p.formRegistrarBovino.fechaNac.$setValidity("max",!1):p.formRegistrarBovino.fechaNac.$setValidity("max",!0);e<r?p.formRegistrarBovino.fechaNac.$setValidity("min",!1):p.formRegistrarBovino.fechaNac.$setValidity("min",!0)},p.getPeso=function(){p.maxCantidad=(12*p.bovino.peso/100).toFixed(2),p.showCantAlimentoOptima=!0},p.cargarProvinciasyLocalidades=function(){e.$parent.blockSpinner(),o.cargarProvinciasyLocalidades({},function(o){p.provincias=o.provincias,m=o.localidades,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),c.error("Ha ocurrido un error, reintentar","Error")})},p.getLocalidades=function(){p.localidades=Enumerable.From(m).Where(function(e){return e.idProvincia===parseInt(p.establecimiento.idProvincia)}).ToArray()},p.agregarEstabOrigen=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.establecimiento.codigoCampo=d.usuarioInfo.codigoCampo,p.establecimiento.$save(function(o){c.success("Se agrego con éxito el establecimiento origen ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoEstablecimiento").modal("hide"),s.reload()},function(o){e.$parent.unBlockSpinnerSave(),p.habilitar=!0,"Establecimiento Origen ya existe"===o.statusText?c.warning("El establecimiento origen que intenta registrar, ya existe en este campo","Advertencia"):c.error("La operación no se pudo completar","Error")})},p.agregarRodeo=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.rodeo.idCampo=d.usuarioInfo.codigoCampo,p.rodeo.$save(function(o){c.success("Se agrego con éxito el rodeo","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoRodeo").modal("hide"),s.reload()},function(o){e.$parent.unBlockSpinnerSave(),p.habilitar=!0,"Rodeo ya existe"===o.statusText?c.warning("El rodeo que intenta registrar, ya existe","Advertencia"):c.error("La operación no se pudo completar","Error")})},p.agregarEstado=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.estado.codigoCampo=d.usuarioInfo.codigoCampo,p.estado.$save(function(o){c.success("Se agrego con éxito el estado ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoEstado").modal("hide"),s.reload()},function(o){e.$parent.unBlockSpinnerSave(),p.habilitar=!0,"Estado ya existe"===o.statusText?c.warning("El estado que intenta registrar, ya existe","Advertencia"):c.error("La operación no se pudo completar","Error")})},p.agregarCategoria=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.categoria.codigoCampo=d.usuarioInfo.codigoCampo,p.categoria.$save(function(o){c.success("Se agrego con éxito la categoría ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoCategoria").modal("hide"),s.reload()},function(o){e.$parent.unBlockSpinnerSave(),p.habilitar=!0,"Categoria ya existe"===o.statusText?c.warning("La categoría que intenta registrar, ya existe","Advertencia"):c.error("La operación no se pudo completar","Error")})},p.agregarRaza=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.raza.codigoCampo=d.usuarioInfo.codigoCampo,p.raza.$save(function(o){c.success("Se agrego con éxito la raza ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoRaza").modal("hide"),s.reload()},function(o){e.$parent.unBlockSpinnerSave(),p.habilitar=!0,"Raza ya existe"===o.statusText?c.warning("La raza que intenta registrar, ya existe","Advertencia"):c.error("La operación no se pudo completar","Error")})},p.agregarAlimento=function(){e.$parent.blockSpinnerSave(),p.habilitar=!1,p.alimento.codigoCampo=d.usuarioInfo.codigoCampo,p.alimento.$save(function(o){c.success("Se agrego con éxito el alimento ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoAlimento").modal("hide"),s.reload()},function(o){e.$parent.unBlockSpinnerSave(),p.habilitar=!0,"Alimento ya existe"===o.statusText?c.warning("El alimento que intenta registrar, ya existe","Advertencia"):c.error("La operación no se pudo completar","Error")})},p.changeEstados=g,p.changeCategorias=function(){if("1"===p.bovino.genero){p.categorias=[];for(var e=0;e<f.length;e++)1===f[e].genero&&p.categorias.push(f[e])}else if("0"===p.bovino.genero||0===p.bovino.genero){p.categorias=[];for(var e=0;e<f.length;e++)0===f[e].genero&&p.categorias.push(f[e])}},p.changeEstadosXEnfermo=function(){if(1===p.bovino.enfermo){p.estados=[];for(var e=0;e<v.length;e++)1!==v[e].idEstado&&p.estados.push(v[e]);p.bovino.idEstado="3"}else p.estados=v,"3"===p.bovino.idEstado&&(p.bovino.idEstado="")}}angular.module("app").controller("registrarBovinoController",e),e.$inject=["$scope","registrarBovinoService","establecimientoOrigenService","rodeoService","estadoService","categoriaService","razaService","alimentoService","toastr","$state","$localStorage","$sessionStorage"]}(),angular.module("app").factory("registrarCampoService",function(e,o){return e(o.getUrlServer()+"api/Campo/",{},{inicializar:{method:"GET",url:o.getUrlServer()+"api/Bovino/cargarProvinciasAndLoc",headers:o.getHeadersServer(),isArray:!1},save:{method:"POST",transformRequest:function(e){var o=new FormData;return o.append("campo",angular.toJson(e)),e.imagen&&o.append("file0",e.imagen),o},headers:o.getContentUndefined()},validarCantCamposUsuario:{method:"GET",url:o.getUrlServer()+"api/Campo/validarCantCamposXUsuario",params:{usuario:"@usuario"},headers:o.getHeadersServer(),isArray:!1}})}),function(){"use strict";function e(e,o,r,a,i,n){var t=e;window.scrollTo(0,0),t.btnVolver="Cancelar",t.habilitar=!0,t.campo={};var l=[];t.imageToUpload=[],t.toDelete=[],t.inicializar=(t.campo=new o,e.$parent.blockSpinner(),void o.inicializar({},function(o){t.provincias=o.provincias,l=o.localidades,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})),t.registrar=function(){t.habilitar=!1,e.$parent.blockSpinnerSave(),t.campo.usuario=i.usuarioInfo.usuario,t.imageToUpload[0]&&(t.campo.imagen=t.imageToUpload[0]);t.campo.$save(function(o){a.success("Se agrego con éxito el campo","Éxito"),e.$parent.unBlockSpinnerSave(),n.go("seleccionCampo")},function(o){e.$parent.unBlockSpinnerSave(),t.habilitar=!0,a.error("Ha ocurrido un error, reintentar","Error")})},t.getLocalidades=function(){t.localidades=Enumerable.From(l).Where(function(e){return e.idProvincia===parseInt(t.campo.idProvincia)}).ToArray()},t.selectUnselectImage=function(o){var r=t.toDelete.indexOf(o);-1!=r?t.toDelete.splice(r,1):e.toDelete.push(o)},t.ImageClass=function(e){return-1!=t.toDelete.indexOf(e)},t.deleteImagefromModel=function(){t.toDelete!=[]&&t.toDelete.length>0?angular.forEach(e.toDelete,function(e,o){var r=t.imageToUpload.indexOf(e),a=t.toDelete.indexOf(e);-1!=r&&(t.imageToUpload.splice(r,1),t.toDelete.splice(a,1))}):a.info("Debe seleccionar una imágen para borrar","Aviso")},t.UploadImg=function(o,r){e.imageToUpload=o}}angular.module("app").controller("registrarCampoController",e),e.$inject=["$scope","registrarCampoService","$localStorage","toastr","$sessionStorage","$state"]}(),angular.module("app").factory("configuracionService",function(e,o){return e(o.getUrlServer()+"api/Usuario/",{},{actualizarPerfilUsuario:{method:"PUT",url:o.getUrlServer()+"api/Usuario/UpdatePerfil",transformRequest:function(e){var o=new FormData;return o.append("usuario",angular.toJson(e)),e.imagen&&o.append("file0",e.imagen),o},headers:o.getContentUndefined()},getDatosPerfilUsuario:{method:"GET",url:o.getUrlServer()+"api/Usuario/GetDatosPerfil",params:{usuario:"@usuario",campo:"@campo",idRol:"@idRol"},headers:o.getHeadersServer(),isArray:!1}})}),function(){"use strict";function e(e,o,r,a,i,n,t,l,c,s,d,u,p,f,m,v,g){window.scrollTo(0,0),e.itemsPorPagina=5,e.nuevaRaza=!1,e.nuevoAlimento=!1,e.nuevoRodeo=!1,e.nuevoEstado=!1,e.nuevaCategoria=!1,e.nuevoEstab=!1,e.nuevoAntibiotico=!1,e.nuevaVacuna=!1,e.showBorrar=!1,e.toDelete=[];var h=[];function b(){m.cargarProvinciasyLocalidades({},function(o){e.provincias=o.provincias,h=o.localidades,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}e.inicializar=(e.$parent.blockSpinner(),void b()),e.popupRazas=function(){e.$parent.blockSpinner(),e.nuevaRaza=!1,e.itemsPorPagina=5,e.raza=new n,n.get({codigoCampo:a.usuarioInfo.codigoCampo},function(o){e.razasCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevaRaza").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.popupAlimentos=function(){e.$parent.blockSpinner(),e.nuevoAlimento=!1,e.itemsPorPagina=5,e.alimento=new l,l.get({idCampo:a.usuarioInfo.codigoCampo},function(o){e.alimentosCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevoAlimento").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.popupRodeos=function(){e.$parent.blockSpinner(),e.nuevoRodeo=!1,e.itemsPorPagina=5,e.rodeo=new c,c.get({campo:a.usuarioInfo.codigoCampo},function(o){e.rodeosCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevoRodeo").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.popupEstados=function(){e.$parent.blockSpinner(),e.nuevoEstado=!1,e.itemsPorPagina=5,e.estado=new s,s.get({codigoCampo:a.usuarioInfo.codigoCampo},function(o){e.estadosCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevoEstado").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.popupCategorias=function(){e.$parent.blockSpinner(),e.nuevaCategoria=!1,e.itemsPorPagina=5,e.categoria=new d,d.get({codigoCampo:a.usuarioInfo.codigoCampo},function(o){e.categoriasCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevaCategoria").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.popupEstablecimientos=function(){e.$parent.blockSpinner(),e.nuevoEstab=!1,e.itemsPorPagina=5,e.establecimiento=new u,u.get({codigoCampo:a.usuarioInfo.codigoCampo},function(o){e.establecimientosCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevoEstablecimiento").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.popupAntibioticos=function(){e.$parent.blockSpinner(),e.nuevoAntibiotico=!1,e.itemsPorPagina=5,e.antibiotico=new p,p.get({idCampo:a.usuarioInfo.codigoCampo},function(o){e.antibioticosCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevoAntibiotico").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar")})},e.popupVacunas=function(){e.$parent.blockSpinner(),e.nuevaVacuna=!1,e.itemsPorPagina=5,e.vacuna=new f,f.get({idCampo:a.usuarioInfo.codigoCampo},function(o){e.vacunasCollection=o,e.$parent.unBlockSpinner(),$("#modalNuevaVacuna").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.cargarProvinciasyLocalidades=b,e.getLocalidades=function(){e.localidades=Enumerable.From(h).Where(function(o){return o.idProvincia===parseInt(e.establecimiento.idProvincia)}).ToArray()},e.agregarEstabOrigen=function(){e.$parent.blockSpinnerSave(),e.establecimiento.codigoCampo=a.usuarioInfo.codigoCampo,e.establecimiento.$save(function(o){r.success("Se agrego con éxito el establecimiento origen ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoEstablecimiento").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Establecimiento Origen ya existe"===o.statusText?r.warning("El establecimiento origen que intenta registrar, ya existe en este campo","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarRodeo=function(){e.$parent.blockSpinnerSave(),e.rodeo.idCampo=a.usuarioInfo.codigoCampo,e.rodeo.$save(function(o){r.success("Se agrego con éxito el rodeo","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoRodeo").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Rodeo ya existe"===o.statusText?r.warning("El rodeo que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarEstado=function(){e.$parent.blockSpinnerSave(),e.estado.codigoCampo=a.usuarioInfo.codigoCampo,e.estado.$save(function(o){r.success("Se agrego con éxito el estado ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoEstado").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Estado ya existe"===o.statusText?r.warning("El estado que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarRaza=function(){e.$parent.blockSpinnerSave(),e.raza.codigoCampo=a.usuarioInfo.codigoCampo,e.raza.$save(function(o){r.success("Se agrego con éxito la raza ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevaRaza").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Raza ya existe"===o.statusText?r.warning("La raza que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarAlimento=function(){e.$parent.blockSpinnerSave(),e.alimento.codigoCampo=a.usuarioInfo.codigoCampo,e.alimento.$save(function(o){r.success("Se agrego con éxito el alimento ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoAlimento").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Alimento ya existe"===o.statusText?r.warning("El alimento que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarAntibiotico=function(){e.$parent.blockSpinnerSave(),e.antibiotico.codigoCampo=a.usuarioInfo.codigoCampo,e.antibiotico.$save(function(o){r.success("Se agrego con éxito el antibiótico ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevoAntibiotico").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Antibiotico ya existe"===o.statusText?r.warning("El antibiótico que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarVacuna=function(){e.$parent.blockSpinnerSave(),e.vacuna.codigoCampo=a.usuarioInfo.codigoCampo,e.vacuna.$save(function(o){r.success("Se agrego con éxito el vacuna ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevaVacuna").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Vacuna ya existe"===o.statusText?r.warning("La vacuna que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.agregarCategoria=function(){e.$parent.blockSpinnerSave(),e.categoria.codigoCampo=a.usuarioInfo.codigoCampo,e.categoria.$save(function(o){r.success("Se agrego con éxito la categoría ","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalNuevaCategoria").modal("hide"),g.reload()},function(o){e.$parent.unBlockSpinnerSave(),"Categoria ya existe"===o.statusText?r.warning("La categoría que intenta registrar, ya existe","Advertencia"):r.error("La operación no se pudo completar","Error")})},e.popupPerfil=function(){e.imageToUpload=[],e.toDelete=[],e.$parent.blockSpinner(),o.getDatosPerfilUsuario({campo:a.usuarioInfo.codigoCampo,usuario:i.usuarioInfo.usuario,idRol:i.usuarioInfo.idRol},function(o){e.perfilUsuario=o,e.perfilUsuario.usuarioImagen=v.getUrlServer()+v.getFolderImagenUsuario()+"\\"+e.perfilUsuario.usuarioImagen+"?cache="+(new Date).getTime(),e.$parent.unBlockSpinner(),$("#modalPerfilUser").modal("show")},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},e.modificarPerfil=function(){e.$parent.blockSpinnerSave(),e.imageToUpload[0]&&(e.perfilUsuario.imagen=e.imageToUpload[0]);e.perfilUsuario.usuario=i.usuarioInfo.usuario,e.perfilUsuario.$actualizarPerfilUsuario(function(o){r.success("Datos del perfil actualizados","Éxito"),e.$parent.unBlockSpinnerSave(),$("#modalPerfilUser").modal("hide")},function(o){e.$parent.unBlockSpinnerSave(),r.error("Ha ocurrido un error, reintentar","Error")})},e.UploadImg=function(o,r){e.imageToUpload=o,e.perfilUsuario.usuarioImagen&&(e.perfilUsuario.usuarioImagen=void 0)},e.ImageClass=function(o){return-1!=e.toDelete.indexOf(o)},e.selectUnselectImage=function(o){if(e.showBorrar)e.toDelete=[],e.showBorrar=!1;else{e.toDelete=[],e.showBorrar=!0;var r=e.toDelete.indexOf(o);-1!=r?e.toDelete.splice(r,1):e.toDelete.push(o)}},e.deleteImagefromModel=function(){e.toDelete!=[]&&e.toDelete.length>0?angular.forEach(e.toDelete,function(o,r){var a=e.imageToUpload.indexOf(o),i=e.toDelete.indexOf(o);-1!=a&&(e.imageToUpload.splice(a,1),e.toDelete.splice(i,1),e.showBorrar=!1)}):r.info("Debe seleccionar una imágen para borrar","Aviso")}}angular.module("app").controller("configuracionController",e),e.$inject=["$scope","configuracionService","toastr","$localStorage","$sessionStorage","razaService","$timeout","alimentoService","rodeoService","estadoService","categoriaService","establecimientoOrigenService","antibioticoService","vacunaService","registrarBovinoService","portalService","$state"]}(),angular.module("app").factory("consultarConflictoService",function(e,o){return e(o.getUrlServer()+"api/Inconsistencia",{},{obtenerConflictos:{method:"GET",url:o.getUrlServer()+"api/Inconsistencia/GetList",headers:o.getHeadersServer(),isArray:!0}})}),function(){"use strict";function e(e,o,r,a,i,n,t){var l=e;function c(){e.$parent.blockSpinner(),l.filtro.fechaDesde&&("string"==typeof l.filtro.fechaDesde&&(l.filtro.fechaDesde=new Date(l.filtro.fechaDesde.split("/")[2],(parseInt(l.filtro.fechaDesde.split("/")[1])-1).toString(),l.filtro.fechaDesde.split("/")[0])),l.filtro.fechaDesde=s(l.filtro.fechaDesde)),l.filtro.fechaHasta&&("string"==typeof l.filtro.fechaHasta&&(l.filtro.fechaHasta=new Date(l.filtro.fechaHasta.split("/")[2],(parseInt(l.filtro.fechaHasta.split("/")[1])-1).toString(),l.filtro.fechaHasta.split("/")[0])),l.filtro.fechaHasta=s(l.filtro.fechaHasta)),o.obtenerConflictos({filtro:angular.toJson(l.filtro,!1)},function(o){0===o.length?(l.disabledExportar="disabled",l.disabled="",l.rowCollection=[],r.info("No se ha encontrado ningún resultado para esta búsqueda","Aviso")):(l.rowCollection=o,l.disabled="",l.disabledExportar=""),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}function s(e){var o,r;return 1===(o=e.getDate().toString()).length&&(o="0"+o),1===(r=(e.getMonth()+1).toString()).length&&(r="0"+r),o+"/"+r+"/"+e.getFullYear().toString()}window.scrollTo(0,0),l.fechaDeHoy=new Date,$("#datetimepicker4").datetimepicker(),$("#datetimepicker5").datetimepicker(),l.init=function(){a.proviene&&(a.proviene=null,i.reload());l.itemsPorPagina=9,e.$parent.blockSpinner(),l.filtro={},l.filtro.tipo="0",l.filtro.estado="2",l.disabled="disabled",l.disabledExportar="disabled",l.filtro.codigoCampo=a.usuarioInfo.codigoCampo,c()}(),l.consultar=c,l.limpiarCampos=function(){i.reload()},l.getFechaDesde=function(){l.filtro.fechaDesde=$("#datetimepicker4")[0].value;var e=new Date(l.filtro.fechaDesde.substring(6,10),parseInt(l.filtro.fechaDesde.substring(3,5))-1,l.filtro.fechaDesde.substring(0,2)),o=new Date(2e3,1,1);e<o?l.formConsultarConflicto.fechaDesde.$setValidity("min",!1):l.formConsultarConflicto.fechaDesde.$setValidity("min",!0)},l.getFechaHasta=function(){if(l.filtro.fechaHasta=$("#datetimepicker5")[0].value,void 0!==l.filtro.fechaDesde){var e=new Date(l.filtro.fechaHasta.substring(6,10),parseInt(l.filtro.fechaHasta.substring(3,5))-1,l.filtro.fechaHasta.substring(0,2)),o=new Date(l.filtro.fechaDesde.substring(6,10),parseInt(l.filtro.fechaDesde.substring(3,5))-1,l.filtro.fechaDesde.substring(0,2));e<o?l.formConsultarConflicto.fechaHasta.$setValidity("min",!1):l.formConsultarConflicto.fechaHasta.$setValidity("min",!0)}},l.exportarExcel=function(){var o=[];o.Titulos=[],o.Titulos[0]="Tipo de Conflicto",o.Titulos[1]="Estado",o.Titulos[2]="Fecha Desde",o.Titulos[3]="Fecha Hasta";var a=[];a[0]="Tipo de Conflicto",a[1]="Fecha",a[2]="Estado";var i=[];if(i[0]="tipo",i[1]="fecha",i[2]="estado",l.rowCollection.length>0){var t=0;for(var c in l.filtro){var d=typeof l.filtro[c];null!==l.filtro[c]&&"object"===d||"$resolved"===c||"function"===d||"codigoCampo"===c||("tipo"===c?"0"===l.filtro[c]?(o[t]="Seleccione",t+=1):"1"===l.filtro[c]?(o[t]="Evento",t+=1):(o[t]="Inseminación",t+=1):"estado"===c?"0"===l.filtro[c]?(o[t]="Seleccione",t+=1):"1"===l.filtro[c]?(o[t]="Solucionado",t+=1):(o[t]="Pendiente",t+=1):(o[t]=e.filtro[c],t+=1))}void 0===l.filtro.fechaDesde&&(o[o.length]=""),void 0===l.filtro.fechaHasta&&(o[o.length]="");var u=new Date;u=s(u),n.exportarExcel("Conflictos"+u,l.rowCollection,a,o,i,"Conflictos",function(){r.success("Se ha exportado con Éxito","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.exportarPDF=function(){var o=[];o.Titulos=[],o.Titulos=[],o.Titulos[0]="Tipo de Conflicto",o.Titulos[1]="Estado",o.Titulos[2]="Fecha Desde",o.Titulos[3]="Fecha Hasta";var a=[];if(a[0]="tipo",a[1]="fecha",a[2]="estado",l.rowCollection.length>0){var i=0;for(var t in l.filtro){var c=typeof l.filtro[t];null!==l.filtro[t]&&"object"===c||"$resolved"===t||"function"===c||"codigoCampo"===t||("tipo"===t?"0"===l.filtro[t]?(o[i]="Seleccione",i+=1):"1"===l.filtro[t]?(o[i]="Evento",i+=1):(o[i]="Inseminación",i+=1):"estado"===t?"0"===l.filtro[t]?(o[i]="Seleccione",i+=1):"1"===l.filtro[t]?(o[i]="Solucionado",i+=1):(o[i]="Pendiente",i+=1):(o[i]=e.filtro[t],i+=1))}void 0===l.filtro.fechaDesde&&(o[o.length]=""),void 0===l.filtro.fechaHasta&&(o[o.length]=""),void 0===l.filtro.peso&&(o[o.length]="");var d=new Date;d=s(d);var u="<html><head></head><body>";if(u+="<h1 style='align:center;'>Conflictos</h1>",u+="<div><table border='1px' style='font-size:6px; width:6000px;'>",null!==l.filtro){for(var p="<thead><tr>",i=0;i<o.Titulos.length;i++)p+="<td bgcolor='black' style='text-align:center; vertical-align:center'><b><font color='white'>"+o.Titulos[i]+"</font></b></td>";p+="</tr></thead>";for(var f="<tr>",i=0;i<o.length;i++)if(null===o[i]||"object"!=typeof o[i]){var m=null!==o[i]?o[i]:"";f+="<td style='text-align:center; vertical-align:center'> "+m+" </td>"}f+="</tr></tbody>";var v=p.concat(f.toString()).concat("</table></div>");u+=v.toString()}u+="<div style='border-width: 2px; border-style: dotted; padding: 1em; font-size:120%;line-height: 1.5em;'><table border='1px' style='font-size:5px; width:6000px'>";var g="<thead><tr>";g+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Tipo de Conflicto</font></b></td>",g+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Estado</font></b></td>",g+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Fecha</font></b></td>",g+="</tr></thead><tbody>";for(var f="<tr>",h=l.rowCollection,b=0;b<h.length;b++)for(var t in h[b]){if(!h[b].hasOwnProperty(t)||"$$hashKey"===t){f+="</tr>";break}if(a.indexOf(t)>-1){var m=""!==h[b][t]?h[b][t]:"";f+="<td style='text-align:center; vertical-align:center'> "+m+" </td>"}}u+="</tbody>";var S=g.concat(f.toString()).concat("</table></div>");u+=S.toString(),u+="</body></html>",n.exportarPDF("Conflictos"+d,u,function(){r.success("Se ha exportado con Éxito.","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}}}angular.module("app").controller("consultarConflictoController",e),e.$inject=["$scope","consultarConflictoService","toastr","$localStorage","$state","exportador","$stateParams"]}(),function(){"use strict";function e(e,o){return{getDatos:function(r,a,i,n,t,l){return e({method:"GET",url:o.getUrlServer()+"api/Inconsistencia/Get",params:{idTacto:r,fechaTacto:a,idTactoConflictivo:i,fechaTactoConflictivo:n,idInseminacion:t,idInseminacionConflictiva:l},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},resolver:function(r){return e({method:"POST",url:o.getUrlServer()+"api/Inconsistencia/Post",params:{value:r},headers:o.getHeadersServer()})}}}angular.module("app").factory("resolverConflictoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n){var t=e;window.scrollTo(0,0),t.inseminacionResultante={},t.tactoResultante={},t.init=(e.$parent.blockSpinner(),void(o.idTacto&&o.idTactoConfl&&o.fechaTacto&&o.fechaTactoConfl||o.idInseminacion&&o.idInseminConfl?(o.idTacto||(o.idTacto=0),o.idTactoConfl||(o.idTactoConfl=0),o.idInseminacion||(o.idInseminacion=0),o.idInseminConfl||(o.idInseminConfl=0),o.fechaTacto||(o.fechaTacto=""),o.fechaTactoConfl||(o.fechaTactoConfl=""),r.getDatos(o.idTacto,o.fechaTacto,o.idTactoConfl,o.fechaTactoConfl,o.idInseminacion,o.idInseminConfl).then(function(o){t.tactoAnterior=o.tactoAnterior,t.tactoNuevo=o.tactoNuevo,t.inseminacionAnterior=o.inseminacionAnterior,t.inseminacionNueva=o.inseminacionNueva,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})):(a.error("Ha ocurrido un error, reintentar","Error"),e.$parent.unBlockSpinner()))),t.seleccionarInseminacion=function(e){t.inseminacionResultante.fechaInseminacion=e.fechaInseminacion,t.inseminacionResultante.tipoInseminacion=e.tipoInseminacion,t.inseminacionResultante.idTipoInseminacion=e.idTipoInseminacion},t.seleccionarTacto=function(e){t.tactoResultante.fechaTacto=e.fechaTacto,t.tactoResultante.tipoTacto=e.tipoTacto,t.tactoResultante.idTipoTacto=e.idTipoTacto,t.tactoResultante.exitoso=e.exitoso},t.seleccionarPropiedadInseminacion=function(e,o){t.inseminacionResultante[o]=e[o],t.inseminacionResultante.idTipoInseminacion=e.idTipoInseminacion},t.seleccionarPropiedadTacto=function(e,o){t.tactoResultante[o]=e[o],t.tactoResultante.idTipoTacto=e.idTipoTacto},t.resolverInseminacion=function(){e.$parent.blockSpinnerSave();var o={inseminacionAnterior:t.inseminacionAnterior,inseminacionNueva:t.inseminacionNueva,inseminacionResultante:t.inseminacionResultante};r.resolver(o).then(function(o){e.$parent.unBlockSpinnerSave(),$("#modalConfirmResolverInseminacionConflictiva").modal("hide"),a.success("Conflicto resuelto con éxito"),n.proviene="resolver",i.go("home.conflictos")},function(o){e.$parent.unBlockSpinnerSave(),a.error("Ha ocurrido un error, reintentar","Error")})},t.resolverTacto=function(){e.$parent.blockSpinnerSave();var o={tactoAnterior:t.tactoAnterior,tactoNuevo:t.tactoNuevo,tactoResultante:t.tactoResultante};r.resolver(o).then(function(o){e.$parent.unBlockSpinnerSave(),$("#modalConfirmResolverTactoConflictivo").modal("hide"),a.success("Conflicto resuelto con éxito"),n.proviene="resolver",i.go("home.conflictos")},function(o){e.$parent.unBlockSpinnerSave(),a.error("Ha ocurrido un error, reintentar","Error")})},t.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},t.seleccionarToros=function(e){t.inseminacionResultante.listaBovinos=e}}angular.module("app").controller("resolverConflictoController",e),e.$inject=["$scope","$stateParams","resolverConflictoService","toastr","$state","$localStorage"]}(),function(){"use strict";angular.module("app").service("exportador",function(){var e={exportarExcel:function(e,o,r,a,i,n){var t='<html xmlns:x="urn:schemas-microsoft-com:office:excel">';t+="<head><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet>",t+="<x:Name>Reporte</x:Name>",t+="<x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet>",t+="</x:ExcelWorksheets></x:ExcelWorkbook></xml></head><body>",t+="<table border='1px'>";if(t+="<tr><td style='text-align:center; font-size:20px' colspan='"+(null!==a&&r.length>a.Titulos.length?r.length:null!==a?a.Titulos.length:r.length)+"'><b>"+n+"</b></td></tr><tr></tr>",null!==a){for(var l="<thead><tr>",c=0;c<a.Titulos.length;c++)l+="<td bgcolor='black' style='text-align:center;'><b><font color='white'>"+a.Titulos[c]+"</font></b></td>";l+="</tr></thead>";var s="<tr>";for(c=0;c<a.length;c++){if(null===a[c]||"object"!=typeof a[c])s+="<td style='text-align:center;'> "+(null!==a[c]?a[c]:"")+" </td>"}s+="</tr>",t+=l.concat(s.toString()).concat("</tbody>").toString(),t+="<tr></tr><tr></tr>"}var d="<thead><tr>";for(c=0;c<r.length;c++)d+="<td bgcolor='black' style='text-align:center;'><b><font color='white'>"+r[c]+"</font></b></td>";d+="</tr></thead>";s="<tr>";for(var u=0;u<o.length;u++)for(var p in o[u]){if(!o[u].hasOwnProperty(p)||"$$hashKey"===p){s+="</tr>";break}i.indexOf(p)>-1&&(s+="<td style='text-align:center;'> "+(""!==o[u][p]?o[u][p]:"")+" </td>")}t+=d.concat(s.toString()).concat("</tbody>").toString();var f=document.createElement("a");t+="</table></body></html>";f.href="data:application/vnd.ms-excel,"+escape(t),f.download=e+".xls",f.click()},exportarPDF:function(e,o){var r={top:60,bottom:60,left:40,width:522},a=new jsPDF("p","pt","a4");a.fromHTML(o,r.left,r.top,{width:r.width,margin:1,pagesplit:!0,elementHandlers:{"#bypassme":function(e,o){return!0}}},function(o){a.save(e+".pdf")},r)}};return e})}(),function(){"use strict";function e(e,o){return{datosUsuario:function(r,a,i){return e({method:"GET",url:o.getUrlServer()+"api/Home/GetDatosUserLogueado",params:{usuario:r,codigoCampo:a,idRol:i},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("homeService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";angular.module("app").controller("homeController",function(e,o,r,a,i,n,t,l){e.Menu=[],e.showBorrar=!1,e.toDelete=[],window.scrollTo(0,0);var c=document.body,s=document.getElementById("cbp-spmenu-s1");-1!==c.className.indexOf("cbp-spmenu-push")&&c.className?-1!==s.className.indexOf("cbp-spmenu-left")&&-1===s.className.indexOf("cbp-spmenu-open")&&-1!==c.className.indexOf("cbp-spmenu-push-toright")&&classie.toggle(s,"cbp-spmenu-open"):classie.toggle(c,"cbp-spmenu-push");var d=d||function(e){var o=e('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header"><h3 style="margin:0;"></h3></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div></div></div></div></div>');return{show:function(r,a){void 0===a&&(a={}),void 0===r&&(r="Cargando...");var i=e.extend({dialogSize:"m",progressType:"",onHide:null},a);o.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+i.dialogSize),o.find(".progress-bar").attr("class","progress-bar"),i.progressType&&o.find(".progress-bar").addClass("progress-bar-"+i.progressType),o.find("h3").text(r),"function"==typeof i.onHide&&o.off("hidden.bs.modal").on("hidden.bs.modal",function(e){i.onHide.call(o)}),o.modal()},hide:function(){o.modal("hide")}}}(jQuery),u=u||function(e){var o=e('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header"><h3 style="margin:0;"></h3></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%;background-color: green;"></div></div></div></div></div></div>');return{show:function(r,a){void 0===a&&(a={}),void 0===r&&(r="Guardando...");var i=e.extend({dialogSize:"m",progressType:"",onHide:null},a);o.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+i.dialogSize),o.find(".progress-bar").attr("class","progress-bar"),i.progressType&&o.find(".progress-bar").addClass("progress-bar-"+i.progressType),o.find("h3").text(r),"function"==typeof i.onHide&&o.off("hidden.bs.modal").on("hidden.bs.modal",function(e){i.onHide.call(o)}),o.modal()},hide:function(){o.modal("hide")}}}(jQuery);e.load=function(){d.show(),o.datosUsuario(i.usuarioInfo.usuario,a.usuarioInfo.codigoCampo,i.usuarioInfo.idRol).then(function(o){window.location.hash.split("/")[1],window.location.hash.split("/")[2];e.Menu=o.menus,e.usuarioInfo=o,e.usuarioInfo.usuarioImagen=t.getUrlServer()+t.getFolderImagenUsuario()+"\\"+e.usuarioInfo.usuarioImagen+"?cache="+(new Date).getTime()},function(e){d.hide(),n.error("Ha ocurrido un error, reintentar","Error")})},e.load(),e.desactivarMenuHijos=function(o){for(var r=e.Menu.indexOf(o),a=0;a<e.Menu[r].menu_Hijos.length;a++)e.Menu[r].menu_Hijos[a].activo="background-color:#FAE5D3"},e.activar=function(o){if(9===o)e.abrirModalCerrarSesion();else for(var r=0;r<e.Menu.length;r++)if(e.Menu[r].idMenu===o)e.Menu[r].activo="background-color:#E59866";else if(null!==e.Menu[r].menu_Hijos&&e.Menu[r].menu_Hijos.length>0)for(var a=0;a<e.Menu[r].menu_Hijos.length;a++)e.Menu[r].menu_Hijos[a].idMenu===o?e.Menu[r].menu_Hijos[a].activo="background-color:#E59866":e.Menu[r].menu_Hijos[a].activo="background-color:#FAE5D3";else e.Menu[r].activo="background-color:#FAE5D3"},e.abrirModalCerrarSesion=function(){$("#modalConfirmCerrarSesion").modal("show")},e.cerrarSesion=function(){a.usuarioInfo=void 0,i.usuarioInfo=void 0,$("#modalConfirmCerrarSesion").modal("hide"),r.go("login")},e.modificarImagenPerfil=function(){e.imageToUpload=[],e.showBorrar=!1,d.show(),l.getDatosPerfilUsuario({campo:a.usuarioInfo.codigoCampo,usuario:i.usuarioInfo.usuario,idRol:i.usuarioInfo.idRol},function(o){e.perfil=o,e.perfil.usuarioImagen=t.getUrlServer()+t.getFolderImagenUsuario()+"\\"+e.perfil.usuarioImagen+"?cache="+(new Date).getTime(),d.hide(),$("#modalPerfil").modal("show")},function(e){d.hide(),n.error("Ha ocurrido un error, reintentar","Error")})},e.UploadImg=function(o,r){e.imageToUpload=o,e.perfil.usuarioImagen&&(e.perfil.usuarioImagen=void 0)},e.selectUnselectImage=function(o){if(e.showBorrar)e.toDelete=[],e.showBorrar=!1;else{e.toDelete=[],e.showBorrar=!0;var r=e.toDelete.indexOf(o);-1!=r?e.toDelete.splice(r,1):e.toDelete.push(o)}},e.ImageClass=function(o){return-1!=e.toDelete.indexOf(o)},e.deleteImagefromModel=function(){e.toDelete!=[]&&e.toDelete.length>0?angular.forEach(e.toDelete,function(o,r){var a=e.imageToUpload.indexOf(o),i=e.toDelete.indexOf(o);-1!=a&&(e.imageToUpload.splice(a,1),e.toDelete.splice(i,1),e.showBorrar=!1)}):n.info("Debe seleccionar una imágen para borrar","Aviso")},e.blockSpinner=function(){d.show()},e.unBlockSpinner=function(){d.hide()},e.blockSpinnerSave=function(){u.show()},e.unBlockSpinnerSave=function(){u.hide()},e.cerrarMenu=function(){s=document.getElementById("cbp-spmenu-s1");var e=document.getElementById("showLeftPush");c=document.body,classie.toggle(e,"active"),classie.toggle(c,"cbp-spmenu-push-toright"),classie.toggle(s,"cbp-spmenu-open"),"showLeftPush"!=="showLeftPush"&&classie.toggle(e,"disabled")},e.guardarImagenPerfil=function(){d.show(),e.imageToUpload[0]&&(e.perfil.imagen=e.imageToUpload[0]),e.perfil.usuario=i.usuarioInfo.usuario,e.perfil.$actualizarPerfilUsuario(function(e){n.success("Datos actualizados","Éxito"),d.hide(),$("#modalPerfil").modal("hide"),r.reload()},function(e){d.hide(),n.error("Ha ocurrido un error, reintentar","Error")})}})}(),function(){"use strict";function e(e,o){return{inicializar:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Dashboard/Get",params:{id:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},obtenerInconsistencias:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Campo/GetInconsistencias",params:{codigoCampo:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("inicioService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n){window.scrollTo(0,0),e.myChartObject={},e.inicializar=(e.$parent.blockSpinner(),void o.inicializar(a.usuarioInfo.codigoCampo).then(function(i){var n,t;e.cantBovinos=i.bovinos,e.cantEventos=i.eventos,e.cantVentas=i.ventas,e.vacasPreniadas=i.vacasPreniadas,t=i.graficoRaza,google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){var e=document.getElementById("graficoRazas"),o=new google.visualization.PieChart(e),r=new google.visualization.DataTable;r.addColumn({type:"string",id:"Raza"}),r.addColumn({type:"number",id:"Cantidad"});for(var a=0;a<t.length;a++)r.addRows([[t[a].raza,t[a].cantidadBovinos]]);o.draw(r,{width:"100%",height:"100%",chartArea:{width:"100%",height:"100%"},legend:{position:"left",textStyle:{fontSize:18}}})}),n=i.graficoCategorias,google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){var e=document.getElementById("graficoCategorias"),o=new google.visualization.ColumnChart(e),r=new google.visualization.DataTable;r.addColumn({type:"string",id:"Categoria",label:"Categorias"}),r.addColumn({type:"number",id:"Cantidad",label:"Cantidad de bovinos"});for(var a=0;a<n.length;a++)r.addRows([[n[a].categoria,n[a].cantidad]]);o.draw(r,{theme:"maximized",width:"100%",height:"100%",hAxis:{textPosition:"out"}})}),e.$parent.unBlockSpinner(),o.obtenerInconsistencias(a.usuarioInfo.codigoCampo).then(function(o){e.$parent.unBlockSpinner(),o.inconsistencias>0&&(e.inconsistencias=o.inconsistencias,$("#modalInconsistencias").modal("show"))},function(e){r.error("Se ha producido un error, reintentar.")})},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})),e.irAConflictos=function(){$("#modalInconsistencias").modal("hide"),i.go("home.conflictos")},e.cerrar=function(){n(function(){$("#modalInconsistencias").modal("hide")},500)}}angular.module("app").controller("inicioController",e),e.$inject=["$scope","inicioService","toastr","$localStorage","$state","$timeout"]}(),function(){function e(e,o){return{inicializar:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/Init",params:{idCampo:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},consultarHembrasServicio:function(){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/HembrasServicio",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},consultarServicioSinConfirmar:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/ServicioSinConfirmar",params:{idCampo:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},getInseminacionesXFechaInsem:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/GetInseminacionesAgrupadasXFechaInsem",params:{idCampo:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},consultarPreniadasXParir:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/PreniadasPorParir",params:{idCampo:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},eliminarInseminacion:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Inseminacion/DeleteInseminacion",params:{parametro:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("consultarInseminacionService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n){var t=e;window.scrollTo(0,0),t.showHembrasParaServicio=!0,t.showServiciosSinConfirm=!1,t.showHembrasPreniadas=!1,t.showServSinConfirm=!0,t.showProxPartos=!0,t.showLactanciasActivas=!0;var l=1,c=1,s=[],d="",u=0;function p(){e.$parent.blockSpinner(),t.showServSinConfirm=!0,t.showProxPartos=!0,o.inicializar(n.usuarioInfo.codigoCampo).then(function(e){t.init=e,f(),m()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}function f(){1===l?(l=0,t.showServSinConfirm=!0,o.consultarServicioSinConfirmar(n.usuarioInfo.codigoCampo).then(function(e){var o=new Date;o=moment(v(o)),t.serviciosSinConfirm={},t.serviciosSinConfirm.menor60=Enumerable.From(e).Where(function(e){var r=e.fechaInseminacion.split("/");return r=moment(r[2]+"/"+r[1]+"/"+r[0]),o.diff(r,"days")<60}).Count(),t.serviciosSinConfirm.entre90y60=Enumerable.From(e).Where(function(e){var r=e.fechaInseminacion.split("/");return r=moment(r[2]+"/"+r[1]+"/"+r[0]),o.diff(r,"days")>=60&&o.diff(r,"days")<90}).Count(),t.serviciosSinConfirm.mas90=Enumerable.From(e).Where(function(e){var r=e.fechaInseminacion.split("/");return r=moment(r[2]+"/"+r[1]+"/"+r[0]),o.diff(r,"days")>90}).Count()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})):0===t.init.serviciosSinConfirmar?(r.info("En este momento no hay servicios sin confirmar","Aviso"),t.showServSinConfirm=!1):(t.showServSinConfirm=!1,l=1)}function m(){if(1===c){c=0,t.showProxPartos=!0;var a=new Date;t.preniadasPorParir={},a=moment(v(a)),o.consultarPreniadasXParir(n.usuarioInfo.codigoCampo).then(function(o){s=o,t.preniadasPorParir.prox10dias=Enumerable.From(o).Where(function(e){var o=e.fechaEstimadaParto.split("/");return(o=moment(o[2]+"/"+o[1]+"/"+o[0])).diff(a,"days")<10&&o.diff(a,"days")>0}).Count(),t.preniadasPorParir.entre10y30dias=Enumerable.From(o).Where(function(e){var o=e.fechaEstimadaParto.split("/");return(o=moment(o[2]+"/"+o[1]+"/"+o[0])).diff(a,"days")>=10&&o.diff(a,"days")<30&&o.diff(a,"days")>0}).Count(),t.preniadasPorParir.entre30y60dias=Enumerable.From(o).Where(function(e){var o=e.fechaEstimadaParto.split("/");return(o=moment(o[2]+"/"+o[1]+"/"+o[0])).diff(a,"days")>=30&&o.diff(a,"days")<60&&o.diff(a,"days")>0}).Count(),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}else 0===t.init.preniadasPorParir?(t.showProxPartos=!1,r.info("En este momento no hay vacas preñadas por parir","Aviso")):(t.showProxPartos=!1,c=1)}function v(e){var o,r;return 1===(o=e.getDate().toString()).length&&(o="0"+o),1===(r=(e.getMonth()+1).toString()).length&&(r="0"+r),e.getFullYear().toString()+"/"+r+"/"+o}t.inicializar=p,t.hembrasParaServicio=function(){t.showHembrasParaServicio?t.showHembrasParaServicio=!1:t.showHembrasParaServicio=!0},t.serviciosSinConfirmar=f,t.proximosPartos=m,t.lactanciasActivas=function(){t.showLactanciasActivas?t.showLactanciasActivas=!1:t.showLactanciasActivas=!0},t.obtenerServSinConfirm=function(a){e.$parent.blockSpinner(),t.showServiciosSinConfirm=!0,t.showHembrasPreniadas=!1,t.itemsPorPagina=10,t.rowCollection=[];var i=new Date;i=moment(v(i)),o.getInseminacionesXFechaInsem(n.usuarioInfo.codigoCampo).then(function(o){switch(a){case"menor60":t.rowCollection=Enumerable.From(o).Where(function(e){var o=e.fechaInseminacion.split("/");return o=moment(o[2]+"/"+o[1]+"/"+o[0]),i.diff(o,"days")<60}).ToArray(),d="Servicios de menos de 60 días sin confirmar",0===t.rowCollection.length&&r.info("En este momento no hay servicios sin confirmar para ese rango de días","Aviso");break;case"entre90y60":t.rowCollection=Enumerable.From(o).Where(function(e){var o=e.fechaInseminacion.split("/");return o=moment(o[2]+"/"+o[1]+"/"+o[0]),i.diff(o,"days")>=60&&i.diff(o,"days")<90}).ToArray(),d="Servicios de entre 60 y 90 días sin confirmar",0===t.rowCollection.length&&r.info("En este momento no hay servicios sin confirmar para ese rango de días","Aviso");break;case"mas90":t.rowCollection=Enumerable.From(o).Where(function(e){var o=e.fechaInseminacion.split("/");return o=moment(o[2]+"/"+o[1]+"/"+o[0]),i.diff(o,"days")>90}).ToArray(),d="Servicios de más de 90 días sin confirmar",0===t.rowCollection.length&&r.info("En este momento no hay servicios sin confirmar para ese rango de días","Aviso")}e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})},t.obtenerProxPartos=function(e){t.showServiciosSinConfirm=!1,t.showHembrasPreniadas=!0,t.itemsPorPagina=10,t.rowCollection=[];var o=new Date;switch(o=moment(v(o)),e){case"prox10dias":t.rowCollection=Enumerable.From(s).Where(function(e){var r=e.fechaEstimadaParto.split("/");return(r=moment(r[2]+"/"+r[1]+"/"+r[0])).diff(o,"days")<10}).ToArray(),d="Partos en los próximos 10 días",0===t.rowCollection.length&&r.info("En este momento no hay próximos partos para ese rango de días","Aviso");break;case"entre10y30dias":t.rowCollection=Enumerable.From(s).Where(function(e){var r=e.fechaEstimadaParto.split("/");return(r=moment(r[2]+"/"+r[1]+"/"+r[0])).diff(o,"days")>=10&&r.diff(o,"days")<30}).ToArray(),d="Partos entre los próximos 10 y 30 días",0===t.rowCollection.length&&r.info("En este momento no hay próximos partos para ese rango de días","Aviso");break;case"entre30y60dias":t.rowCollection=Enumerable.From(s).Where(function(e){var r=e.fechaEstimadaParto.split("/");return(r=moment(r[2]+"/"+r[1]+"/"+r[0])).diff(o,"days")>=30&&r.diff(o,"days")<60}).ToArray(),d="Partos entre los próximos 30 y 60 días",0===t.rowCollection.length&&r.info("En este momento no hay próximos partos para ese rango de días","Aviso")}},t.obtenerHembrasParaServicio=function(){t.init.hembrasParaServicio?a.go("home.detalleInseminacion",{fecha:null,desde:"hembrasParaServ"}):r.info("En este momento no hay vacas listas para servicio","Aviso")},t.obtenerLactanciasActivas=function(){t.init.lactanciasActivas>0?a.go("home.detalleInseminacion",{fecha:null,desde:"lactanciasActivas"}):r.info("En este momento no hay vacas en lactancia para mostrar","Aviso")},t.exportarExcelServSinConfirm=function(){var e=[];e[0]="Tipo de Inseminación",e[1]="Fecha Inseminación",e[2]="Cantidad de bovinos que participaron";var o=[];if(o[0]="tipoInseminacion",o[1]="fechaInseminacion",o[2]="cantidadVacas",t.rowCollection.length>0){var a=new Date;a=v(a),i.exportarExcel(d+a,t.rowCollection,e,null,o,d,function(){r.success("Se ha exportado con Éxito","ÉXITO")},function(e){t.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},t.exportarExcelVacasPreniadas=function(){var e=[];e[0]="Tipo de Inseminación",e[1]="Fecha Inseminación",e[2]="Fecha estimada de parto";var o=[];if(o[0]="tipoInseminacion",o[1]="fechaInseminacion",o[2]="fechaEstimadaParto",t.rowCollection.length>0){var a=new Date;a=v(a),i.exportarExcel(d+a,t.rowCollection,e,null,o,d,function(){r.success("Se ha exportado con Éxito","ÉXITO")},function(e){t.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},t.exportarPDFServSinConfirm=function(){var e=[];if(e[0]="tipoInseminacion",e[1]="fechaInseminacion",e[2]="cantidadVacas",t.rowCollection.length>0){var o=new Date;o=v(o);var a="<html><head></head><body>";a+="<h1 style='align:center;'>"+d+"</h1>",a+="<div style='border-width: 2px; border-style: dotted; padding: 1em; font-size:120%;line-height: 1.5em;'><table border='1px' style='font-size:5px; width:6000px'>";var n="<thead><tr>";n+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Fecha Inseminación </font></b></td>",n+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Tipo de Inseminación</font></b></td>",n+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Cantidad de bovinos que participaron</font></b></td>",n+="</tr></thead><tbody>";for(var l="<tr>",c=t.rowCollection,s=0;s<c.length;s++)for(var u in c[s]){if(!c[s].hasOwnProperty(u)||"$$hashKey"===u){l+="</tr>";break}if(e.indexOf(u)>-1){var p=""!==c[s][u]?c[s][u]:"";l+="<td style='text-align:center; vertical-align:center'> "+p+" </td>"}}a+="</tbody>";var f=n.concat(l.toString()).concat("</table></div>");a+=f.toString(),a+="</body></html>",i.exportarPDF(d+o,a,function(){r.success("Se ha exportado con Éxito.","ÉXITO")},function(e){t.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},t.exportarPDFVacasPreniadas=function(){var e=[];if(e[0]="tipoInseminacion",e[1]="fechaInseminacion",e[2]="fechaEstimadaParto",t.rowCollection.length>0){var o=new Date;o=v(o);var a="<html><head></head><body>";a+="<h1 style='align:center;'>"+d+"</h1>",a+="<div style='border-width: 2px; border-style: dotted; padding: 1em; font-size:120%;line-height: 1.5em;'><table border='1px' style='font-size:5px; width:6000px'>";var n="<thead><tr>";n+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Fecha Inseminación</font></b></td>",n+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Tipo de Inseminación</font></b></td>",n+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Fecha estimada de parto</font></b></td>",n+="</tr></thead><tbody>";for(var l="<tr>",c=t.rowCollection,s=0;s<c.length;s++)for(var u in c[s]){if(!c[s].hasOwnProperty(u)||"$$hashKey"===u){l+="</tr>";break}if(e.indexOf(u)>-1){var p=""!==c[s][u]?c[s][u]:"";l+="<td style='text-align:center; vertical-align:center'> "+p+" </td>"}}a+="</tbody>";var f=n.concat(l.toString()).concat("</table></div>");a+=f.toString(),a+="</body></html>",i.exportarPDF(d+o,a,function(){r.success("Se ha exportado con Éxito.","ÉXITO")},function(e){t.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},t.openPopUp=function(e,o){t.fecha=e,""!==o&&(u=o);$("#modalConfirmEliminar").modal("show")},t.eliminar=function(){e.$parent.blockSpinnerSave();var i="";i=0!==u?u:t.fecha;o.eliminarInseminacion(i).then(function(){$("#modalConfirmEliminar").modal("hide"),r.success("Inseminación eliminada con éxito","Éxito"),e.$parent.unBlockSpinnerSave(),a.reload()},function(o){$("#modalConfirmEliminar").modal("hide"),e.$parent.unBlockSpinnerSave(),r.error("Ha ocurrido un error, reintentar","Error")})},p()}angular.module("app").controller("consultarInseminacionController",e),e.$inject=["$scope","consultarInseminacionService","toastr","$state","exportador","$localStorage"]}(),function(){"use strict";function e(e,o){return{getInseminacion:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/Get",params:{fechaInseminacion:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},getHembrasServicio:function(){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/HembrasServicio",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},getLactancias:function(){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/Lactancias",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("detalleInseminacionService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a){var i=e;window.scrollTo(0,0),i.inseminacion={},i.desde=r.desde,i.itemsPorPaginaTacto=10,i.disabled=!0,i.inicializar=(e.$parent.blockSpinner(),i.disabled=!0,i.itemsPorPagina=9,void(null!==r.fecha?(i.fecha=r.fecha,o.getInseminacion(r.fecha).then(function(o){i.inseminacion=o,""!==i.inseminacion.fechaEstimadaNacimiento?(i.vaca=i.inseminacion.listaBovinos[0],i.toro=i.inseminacion.listaToros[0],i.tactos=i.inseminacion.tactos):(i.rowCollection=i.inseminacion.listaBovinos,i.torosCollection=i.inseminacion.listaToros),i.tituloTabla="Bovinos que participaron de la inseminación",i.disabled=!1,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})):"hembrasParaServ"===i.desde?o.getHembrasServicio().then(function(o){i.rowCollection=o,i.tituloTabla="Hembras para servicio",i.disabled=!1,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")}):"lactanciasActivas"===i.desde?o.getLactancias().then(function(o){i.rowCollection=o,i.tituloTabla="Vacas dando de lactar",i.disabled=!1,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")}):e.$parent.unBlockSpinner()))}angular.module("app").controller("detalleInseminacionController",e),e.$inject=["$scope","detalleInseminacionService","$stateParams","toastr"]}(),function(){"use strict";function e(e,o){return{getInseminacion:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/Get",params:{fechaInseminacion:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},getHembrasServicio:function(){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/HembrasServicio",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},getLactancias:function(){return e({method:"GET",url:o.getUrlServer()+"api/Inseminacion/Lactancias",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},modificar:function(r,a,i,n){return e({method:"PUT",url:o.getUrlServer()+"api/Inseminacion",params:{value:r,listaVacas:a,listaToros:i,fechaAnterior:n},headers:o.getHeadersServer()})},update:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Inseminacion/Update",params:{value:r},headers:o.getHeadersServer()})}}}angular.module("app").factory("modificarInseminacionService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a){var i=e;window.scrollTo(0,0),i.habilitar=!1,i.modificar=d,i.inicializar=(e.$parent.blockSpinner(),i.habilitar=!1,i.fecha=a.fecha,void o.getInseminacion(a.fecha).then(function(o){if(i.inseminacion=o,i.inseminacion.idTipoInseminacion=i.inseminacion.idTipoInseminacion.toString(),l=i.inseminacion.fechaInseminacion,""!==i.inseminacion.fechaEstimadaNacimiento){$("#datetimepicker5").datetimepicker(),i.vaca=i.inseminacion.listaBovinos[0],i.inseminacion.listaToros&&(i.toro=i.inseminacion.listaToros[0]),i.tactos=i.inseminacion.tactos;for(var r=0;r<i.tactos.length;r++)i.tactos[r].idTipoTacto=i.tactos[r].idTipoTacto.toString()}else i.rowCollection=i.inseminacion.listaBovinos,i.torosCollection=i.inseminacion.listaToros;i.tituloTabla="Vacas que participaron de la inseminación",i.tiposInseminacion=[{idTipoInseminacion:"1",descripcion:"Artificial"},{idTipoInseminacion:"2",descripcion:"Montura"}],e.$parent.unBlockSpinner(),i.habilitar=!0},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})),i.getFecha=function(){i.inseminacion.fechaInseminacion=$("#datetimepicker4")[0].value;var e=new Date(i.inseminacion.fechaInseminacion.substring(6,10),parseInt(i.inseminacion.fechaInseminacion.substring(3,5))-1,i.inseminacion.fechaInseminacion.substring(0,2)),o=new Date,r=new Date(2e3,1,1);e>o?i.formModificarInseminacion.fechaInseminacion.$setValidity("max",!1):i.formModificarInseminacion.fechaInseminacion.$setValidity("max",!0);e<r?i.formModificarInseminacion.fechaInseminacion.$setValidity("min",!1):i.formModificarInseminacion.fechaInseminacion.$setValidity("min",!0)},i.getFechaParicion=function(){i.inseminacion.fechaEstimadaNacimiento=$("#datetimepicker5")[0].value;var e=new Date(i.inseminacion.fechaEstimadaNacimiento.substring(6,10),parseInt(i.inseminacion.fechaEstimadaNacimiento.substring(3,5))-1,i.inseminacion.fechaEstimadaNacimiento.substring(0,2)),o=(new Date,new Date(2e3,1,1));e<o?i.formModificarInseminacion.fechaParicion.$setValidity("min",!1):i.formModificarInseminacion.fechaParicion.$setValidity("min",!0)},i.openPopUp=function(e,o){n=e,i.nroCaravana=o,$("#modalConfirmEliminarVaca").modal("show")},i.openPopUpToro=function(e,o){t=e,i.nroCaravanaToro=o,$("#modalConfirmEliminarToro").modal("show")},i.eliminarToro=function(){for(var e=0;e<i.torosCollection.length;e++)i.torosCollection[e].idBovino===t&&i.torosCollection.splice(e,1);$("#modalConfirmEliminarToro").modal("hide")},i.eliminar=function(){for(var e=0;e<i.rowCollection.length;e++)i.rowCollection[e].idBovino===n&&i.rowCollection.splice(e,1);$("#modalConfirmEliminarVaca").modal("hide")},i.antesDeModificar=function(){if(i.habilitar=!1,i.showEliminar=!0,void 0!==i.rowCollection)for(var e=0;e<i.rowCollection.length;e++)c.push(i.rowCollection[e].idBovino);else c.push(i.vaca.idBovino);if(i.torosCollection)for(var e=0;e<i.torosCollection.length;e++)s.push(i.torosCollection[e].idBovino);else s.push(i.toro.idBovino);i.inseminacion.tipoInseminacion=i.inseminacion.idTipoInseminacion,0===c.length&&1===i.inseminacion.tipoInseminacion||0===c.length&&"2"===i.inseminacion.tipoInseminacion&&0===s.length?$("#modalConfirmEliminarInseminacion").modal("show"):c.length>0&&"2"===i.inseminacion.tipoInseminacion&&0===s.length?$("#modalConfirmEliminarInseminacionSinToros").modal("show"):d()},i.fechaDeHoy=new Date,i.desde=a.desde,i.showEliminar=!0,$("#datetimepicker4").datetimepicker();var n=0,t=0,l="",c=[],s=[];function d(){0===s.length&&(i.inseminacion.tipoInseminacion=1),e.$parent.blockSpinnerSave(),"servicioSinConfirm"===i.desde?o.modificar(i.inseminacion,c.toString(),s.toString(),l).then(function(o){e.$parent.unBlockSpinnerSave(),$("#modalConfirmEliminarInseminacion").modal("hide"),$("#modalConfirmEliminarInseminacionSinToros").modal("hide"),i.showEliminar=!1,r.success("Se modificó la inseminación con éxito ","Éxito")},function(o){e.$parent.unBllockSpinnerSave(),r.error("La operación no se pudo completar","Error")}):o.update(i.inseminacion).then(function(o){e.$parent.unBlockSpinnerSave(),$("#modalConfirmEliminarInseminacion").modal("hide"),r.success("Se modificó la inseminación con éxito ","Éxito")},function(o){e.$parent.unBlockSpinnerSave(),r.error("La operación no se pudo completar","Error")})}$("#datetimepicker6").datetimepicker()}angular.module("app").controller("modificarInseminacionController",e),e.$inject=["$scope","modificarInseminacionService","toastr","$stateParams"]}(),function(){"use strict";function e(e,o){return{consultar:function(r){return e({method:"POST",url:o.getUrlServer()+"api/Usuario/Validar",params:{usuario:r}}).then(function(e){return e.data||[]})}}}angular.module("app").factory("loginService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n){var t=e;t.usuario={},t.ocultarUsuario=!0,t.inicializar=(document.getElementById("btn_login").click(),void(void 0!==n.usuarioInfo&&(t.usuario.usuario=n.usuarioInfo.usuario,t.ocultarUsuario=!1))),t.aceptar=function(){(function(){if(c(t.usuario.usuario))return o.info("El usuario se encuentra vacío"),!1;if(c(t.usuario.pass))return o.info("La contraseña se encuentra vacía"),!1;return!0})()&&($("#login-modal").modal("hide"),l.show(),e.usuario.idRol=1,r.consultar(e.usuario).then(function(e){1===e.resultado?(void 0===n.usuarioInfo&&(n.usuarioInfo={},n.usuarioInfo.usuario=t.usuario.usuario,n.usuarioInfo.idRol=t.usuario.idRol,n.usuarioInfo.token=e.token),i.go("seleccionCampo")):(o.error("Los datos son inválidos. Por favor revíselos e intente nuevamente."),$("#login-modal").modal("show")),l.hide()},function(e){l.hide(),o.error("Ha ocurrido un problema. Reintente nuevamente."),$("#login-modal").modal("show")}))};var l=l||function(e){var o=e('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header"><h3 style="margin:0;"></h3></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div></div></div></div></div>');return{show:function(r,a){void 0===a&&(a={}),void 0===r&&(r="Cargando...");var i=e.extend({dialogSize:"m",progressType:"",onHide:null},a);o.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+i.dialogSize),o.find(".progress-bar").attr("class","progress-bar"),i.progressType&&o.find(".progress-bar").addClass("progress-bar-"+i.progressType),o.find("h3").text(r),"function"==typeof i.onHide&&o.off("hidden.bs.modal").on("hidden.bs.modal",function(e){i.onHide.call(o)}),o.modal()},hide:function(){o.modal("hide")}}}(jQuery);function c(e){return angular.isUndefined(e)||null===e||null==e}}angular.module("app").controller("loginController",e),e.$inject=["$scope","toastr","loginService","$localStorage","$state","$sessionStorage"]}(),angular.module("app").factory("alimentoService",function(e,o){return e(o.getUrlServer()+"api/Alimento/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),url:o.getUrlServer()+"api/Alimento/GetList",params:{idCampo:"@idCampo"},isArray:!0}})}),angular.module("app").factory("antibioticoService",function(e,o){return e(o.getUrlServer()+"api/Antibiotico/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),url:o.getUrlServer()+"api/Antibiotico/GetList",params:{idCampo:"@idCampo"},isArray:!0}})}),angular.module("app").factory("categoriaService",function(e,o){return e(o.getUrlServer()+"api/Categoria/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),params:{codigoCampo:"@codigoCampo"},isArray:!0}})}),angular.module("app").factory("establecimientoOrigenService",function(e,o){return e(o.getUrlServer()+"api/EstablecimientoOrigen/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),params:{codigoCampo:"@codigoCampo"},isArray:!0}})}),angular.module("app").factory("estadoService",function(e,o){return e(o.getUrlServer()+"api/Estado/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),params:{codigoCampo:"@codigoCampo"},isArray:!0}})}),angular.module("app").factory("razaService",function(e,o){return e(o.getUrlServer()+"api/Raza/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),params:{codigoCampo:"@codigoCampo"},isArray:!0}})}),angular.module("app").factory("rodeoService",function(e,o){return e(o.getUrlServer()+"api/Rodeo/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),url:o.getUrlServer()+"api/Rodeo/GetList",params:{campo:"@campo"},isArray:!0}})}),angular.module("app").factory("vacunaService",function(e,o){return e(o.getUrlServer()+"api/Vacuna/",{},{save:{method:"POST",headers:o.getHeadersServer()},get:{method:"GET",headers:o.getHeadersServer(),url:o.getUrlServer()+"api/Vacuna/GetList",params:{idCampo:"@idCampo"},isArray:!0}})}),function(){"use strict";angular.module("app").service("portalService",function(e,o){var r={getUrlServer:function(){return"http://localhost:2424/"},getHeadersServer:function(){return{Authorization:e.usuarioInfo.token}},getContentUndefined:function(){return{Authorization:e.usuarioInfo.token,"Content-Type":void 0}},getFolderImagenCampo:function(){return"Images\\Campo\\"},getFolderImagenUsuario:function(){return"Images\\Usuario\\"}};return r})}(),function(){"use strict";function e(e){return{getData:function(){}}}angular.module("app").factory("presentacion",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){this.title="caca"}angular.module("app").controller("presentacionController",e),e.$inject=["$scope"]}(),angular.module("app").factory("reporteBovinoService",function(e,o){return e(o.getUrlServer()+"api/Reportes/",{},{inicializar:{method:"GET",url:o.getUrlServer()+"api/Reportes/Bovinos",headers:o.getHeadersServer(),params:{codigoCampo:"@codigoCampo"},isArray:!0}})}),function(){"use strict";function e(e,o,r,a){var i=e;function n(){e.$parent.blockSpinner(),o.inicializar({codigoCampo:a.usuarioInfo.codigoCampo},function(o){i.rowCollection=o,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),toastr.error("Ha ocurrido un error, reintentar","Error")})}i.inicializar=n(),window.scrollTo(0,0),i.disabledExportar="disabled",i.bovinos=[],i.itemsPorPagina=50,n()}angular.module("app").controller("reporteBovinoController",e),e.$inject=["$scope","reporteBovinoService","exportador","$localStorage"]}(),angular.module("app").factory("reporteInseminacionService",function(e,o){return e(o.getUrlServer()+"api/Inseminacion/",{},{inicializar:{method:"GET",url:o.getUrlServer()+"api/Reportes/Inseminacion/:idAmbitoEstado/:idCampo",headers:o.getHeadersServer(),params:{idAmbitoEstado:"@idAmbitoEstado",idCampo:"@idCampo"},isArray:!1}})}),function(){"use strict";function e(e,o){var r=e;function a(){e.$parent.unBlockSpinner()}r.inicializar=a(),r.disabledExportar="disabled",r.itemsPorPagina=50,r.tablaActiva=0,r.hembrasParaServir=[{orden:1,caravana:12133,raza:"Rosa Pennington",categoria:"Fran Tran",edad:"1 años 5 meses",peso:326,estado:"Shelly Mclaughlin",rodeo:"Georgia",partos:1}],r.lactanciasActivas=[],r.preniadas=[],r.serviciosSinConfirmar=[],a()}angular.module("app").controller("reporteInseminacionController",e),e.$inject=["$scope","reporteInseminacionService"]}(),angular.module("app").factory("consultarReportesService",function(e,o){return e(o.getUrlServer()+"api/Inconsistencia",{},{obtenerReportes:{method:"GET",url:o.getUrlServer()+"api/Inconsistencia/GetList",headers:o.getHeadersServer(),isArray:!0}})}),function(){"use strict";function e(e){}angular.module("app").controller("consultarReportesController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,o){return{consultar:function(r,a){return e({method:"GET",url:o.getUrlServer()+"api/Campo/GetList",params:{usuario:r,idRol:a},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("seleccionCampoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n,t,l){var c=e;c.usuario={},window.scrollTo(0,0),c.inicializar=void r.consultar(n.usuarioInfo.usuario,n.usuarioInfo.idRol).then(function(o){e.campos=o;for(var r=0;r<e.campos.length;r++)e.campos[r].imagen=l.getUrlServer()+l.getFolderImagenCampo()+e.campos[r].codigoCampo+"\\"+e.campos[r].imagen+"?cache="+(new Date).getTime()},function(e){o.error("Se ha producido un error, reintentar.")}),c.seleccionarCampo=function(e){a.usuarioInfo.codigoCampo=e,i.go("home.inicio")},c.validarCantCampos=function(){t.validarCantCamposUsuario({usuario:n.usuarioInfo.usuario},function(e){e.resultado?i.go("registrarCampo"):o.info("No puede agregar mas campos, verifique su plan contratado.","Aviso")},function(e){o.error("Se ha producido un error, reintentar.")})},a.usuarioInfo={}}angular.module("app").controller("seleccionCampoController",e),e.$inject=["$scope","toastr","seleccionCampoService","$localStorage","$state","$sessionStorage","registrarCampoService","portalService"]}(),function(){"use strict";function e(e,o){return{getListaEventos:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Evento/GetListaEventos",params:{filtro:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},eliminarEvento:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Evento/DeleteEvento",params:{idEvento:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("consultarTrazabilidadService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o){return{inicializar:function(){return e({method:"GET",url:o.getUrlServer()+"api/TipoEvento/GetList",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},insert:function(r,a){return e({method:"POST",url:o.getUrlServer()+"api/Evento/Insert",params:{evento:r,lista:a}}).then(function(e){return e.data||[]})}}}angular.module("app").factory("tipoEventoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n,t){var l=e;window.scrollTo(0,0),l.disabled="disabled",l.disabledExportar="disabled",l.tipoEventoPopUp="",l.fecha="",l.inicializar=(e.$parent.blockSpinner(),l.disabledExportar="disabled",l.disabled="disabled",l.itemsPorPagina=9,void o.inicializar({}).then(function(e){l.Eventos=e,l.filtro.idTipoEvento="0",l.filtro.codigoCampo=t.usuarioInfo.codigoCampo,l.disabled="",u()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})),l.consultar=u,l.limpiarCampos=function(){i.reload()},l.exportarExcel=function(){var o=[];o.Titulos=[],o.Titulos[0]="Nro Caravana",o.Titulos[1]="Tipo Evento",o.Titulos[2]="Fecha Desde",o.Titulos[3]="Fecha Hasta";var a=[];a[0]="Tipo de Evento",a[1]="Fecha Evento",a[2]="Bovinos que participaron";var i=[];if(i[0]="tipoEvento",i[1]="fechaHora",i[2]="cantidadBovinos",l.rowCollection.length>0){var t=1;for(var c in void 0===l.filtro.numCaravana?o[0]="":l.filtro[0]=l.filtro.numCaravana,l.filtro){var s=typeof l.filtro[c];if((null===l.filtro[c]||"object"!==s)&&"$resolved"!==c&&"function"!==s&&"numCaravana"!==s)if("idTipoEvento"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.Eventos.length;d++)if(l.filtro[c]===l.Eventos[d].idTipoEvento||parseInt(l.filtro[c])===l.Eventos[d].idTipoEvento){o[t]=l.Eventos[d].descripcion,t+=1;break}}else"fechaDesde"===c?"2"===l.filtro[c]?(o[t]="",t+=1):(o[t]="Hembra",t+=1):"fechaHasta"===c?"0"===l.filtro[c]&&(o[t]="Seleccione",t+=1):"numCaravana"===c?o[0]=e.filtro[c]:(o[t]=e.filtro[c],t+=1)}void 0===l.filtro.fechaDesde&&(o[o.length]=""),void 0===l.filtro.fechaHasta&&(o[o.length]="");var u=new Date;u=p(u);for(var t=0;t<l.rowCollection.length;t++)void 0===l.rowCollection[t].$$hashKey&&(l.rowCollection[t].$$hashKey="");n.exportarExcel("Trazabilidad"+u,l.rowCollection,a,o,i,"Trazabilidad",function(){r.success("Se ha exportado con Éxito.","EXITOSO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.openPopUp=function(e,o,r){l.tipoEventoPopUp=e,l.fecha=o,c=r,$("#modalConfirmEliminar").modal("show")},l.eliminar=function(){e.$parent.blockSpinnerSave(),a.eliminarEvento(c).then(function(){$("#modalConfirmEliminar").modal("hide"),r.success("Evento eliminado con éxito","Éxito"),e.$parent.unBlockSpinnerSave(),i.reload()},function(o){$("#modalConfirmEliminar").modal("hide"),e.$parent.unBlockSpinnerSave(),r.error("Ha ocurrido un error, reintentar","Error")})},l.getFechaDesde=function(){l.filtro.fechaDesde=$("#datetimepicker4")[0].value;var e=new Date(l.filtro.fechaDesde.substring(6,10),parseInt(l.filtro.fechaDesde.substring(3,5))-1,l.filtro.fechaDesde.substring(0,2)),o=new Date(2e3,1,1);e<o?l.formConsultarTrazabilidad.fechaDesde.$setValidity("min",!1):l.formConsultarTrazabilidad.fechaDesde.$setValidity("min",!0)},l.getFechaHasta=function(){if(l.filtro.fechaHasta=$("#datetimepicker5")[0].value,void 0!==l.filtro.fechaDesde){var e=new Date(l.filtro.fechaHasta.substring(6,10),parseInt(l.filtro.fechaHasta.substring(3,5))-1,l.filtro.fechaHasta.substring(0,2)),o=new Date(l.filtro.fechaDesde.substring(6,10),parseInt(l.filtro.fechaDesde.substring(3,5))-1,l.filtro.fechaDesde.substring(0,2));e<o?l.formConsultarTrazabilidad.fechaHasta.$setValidity("min",!1):l.formConsultarTrazabilidad.fechaHasta.$setValidity("min",!0)}},l.exportarPDF=function(){var o=[];o.Titulos=[],o.Titulos[0]="Nro Caravana",o.Titulos[1]="Tipo Evento",o.Titulos[2]="Fecha Desde",o.Titulos[3]="Fecha Hasta";var a=[];if(a[0]="tipoEvento",a[1]="fechaHora",a[2]="cantidadBovinos",l.rowCollection.length>0){var i=1;for(var t in void 0===l.filtro.numCaravana?o[0]="":o[0]=l.filtro.numCaravana,l.filtro){var c=typeof l.filtro[t];if((null===l.filtro[t]||"object"!==c)&&"$resolved"!==t&&"function"!==c&&"numCaravana"!==t)if("idTipoEvento"===t){if("0"===l.filtro[t])o[i]="Seleccione",i+=1;else for(var s=0;s<l.Eventos.length;s++)if(l.filtro[t]===l.Eventos[s].idTipoEvento||parseInt(l.filtro[t])===l.Eventos[s].idTipoEvento){o[i]=l.Eventos[s].descripcion,i+=1;break}}else"fechaDesde"===t?"2"===l.filtro[t]?(o[i]="",i+=1):(o[i]="Hembra",i+=1):"fechaHasta"===t?"0"===l.filtro[t]&&(o[i]="Seleccione",i+=1):(o[i]=e.filtro[t],i+=1)}void 0===l.filtro.fechaDesde&&(o[o.length]=""),void 0===l.filtro.fechaHasta&&(o[o.length]="");var d=new Date;d=p(d);var u="<html><head></head><body>";if(u+="<h1 style='align:center;'>Trazabilidad</h1>",u+="<div><table border='1px' style='font-size:6px; width:6000px;'>",null!==l.filtro){for(var f="<thead><tr>",i=0;i<o.Titulos.length;i++)f+="<td bgcolor='black' style='text-align:center; vertical-align:center'><b><font color='white'>"+o.Titulos[i]+"</font></b></td>";f+="</tr></thead>";for(var m="<tr>",i=0;i<o.length;i++)if(null===o[i]||"object"!=typeof o[i]){var v=null!==o[i]?o[i]:"";m+="<td style='text-align:center; vertical-align:center'> "+v+" </td>"}m+="</tr></tbody>";var g=f.concat(m.toString()).concat("</table></div>");u+=g.toString()}u+="<div style='border-width: 2px; border-style: dotted; padding: 1em; font-size:120%;line-height: 1.5em;'><table border='1px' style='font-size:5px; width:6000px'>";var h="<thead><tr>";h+="<td style='width:1000; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Tipo de Evento</font></b></td>",h+="<td style='width:1000; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Fecha Evento</font></b></td>",h+="<td style='width:1000; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Bovinos que participaron</font></b></td>",h+="</tr></thead><tbody>";for(var m="<tr>",i=0;i<l.rowCollection.length;i++)void 0===l.rowCollection[i].$$hashKey&&(l.rowCollection[i].$$hashKey="");for(var b=l.rowCollection,s=0;s<b.length;s++)for(var t in b[s]){if(!b[s].hasOwnProperty(t)||"$$hashKey"===t){m+="</tr>";break}if(a.indexOf(t)>-1){var v=""!==b[s][t]?b[s][t]:"";m+="<td style='text-align:center; vertical-align:center'> "+v+" </td>"}}u+="</tbody>";var S=h.concat(m.toString()).concat("</table></div>");u+=S.toString(),u+="</body></html>",n.exportarPDF("Trazabilidad"+d,u,function(){r.success("Se ha exportado con Éxito.","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.filtro={},l.cursor="";var c=0,s=[],d=[];function u(){e.$parent.blockSpinner(),l.disabled="disabled",l.disabledExportar="disabled",void 0!==l.filtro.fechaDesde&&("string"==typeof l.filtro.fechaDesde&&(l.filtro.fechaDesde=new Date(l.filtro.fechaDesde.split("/")[2],(parseInt(l.filtro.fechaDesde.split("/")[1])-1).toString(),l.filtro.fechaDesde.split("/")[0])),l.filtro.fechaDesde=p(l.filtro.fechaDesde)),void 0!==l.filtro.fechaHasta&&("string"==typeof l.filtro.fechaHasta&&(l.filtro.fechaHasta=new Date(l.filtro.fechaHasta.split("/")[2],(parseInt(l.filtro.fechaHasta.split("/")[1])-1).toString(),l.filtro.fechaHasta.split("/")[0])),l.filtro.fechaHasta=p(l.filtro.fechaHasta)),null===l.filtro.numCaravana?(l.filtro.numCaravana=void 0,$("#timeline").hide()):void 0!==l.filtro.numCaravana&&null!==l.filtro.numCaravana&&$("#timeline").show(),a.getListaEventos(angular.toJson(l.filtro,!1)).then(function(o){0===o.length?(l.disabledExportar="disabled",l.disabled="",l.rowCollection=[],$("#timeline").hide(),r.info("No se ha encontrado ningún resultado para esta búsqueda","Aviso")):(l.rowCollection=o,void 0!==l.filtro.numCaravana&&null!==l.filtro.numCaravana&&function(){var e=function(e){for(var o=[],r=e.length-1;r>=0;r--)o.push(e[r]);return o}(l.rowCollection);google.charts.load("current",{packages:["timeline"]}),google.charts.setOnLoadCallback(function(){var o,r,a=document.getElementById("timeline"),i=new google.visualization.Timeline(a),n=new google.visualization.DataTable;n.addColumn({type:"string",id:"Evento"}),n.addColumn({type:"date",id:"Start"}),n.addColumn({type:"date",id:"End"});for(var t=0;t<e.length;t++){var l=e[t].fechaHora.substring(0,10).split("/"),c=e[t].fechaHora.substring(11,16).split(":");switch(e[t].tipoEvento){case"Vacunación":case"Antibiótico":(o=new Date(l[2],parseInt(l[1])-1,l[0],c[0],c[1])).setDate(o.getDate()+1),o=p(o),r=o.substring(11,16).split(":"),o=o.substring(0,10).split("/");break;case"Manejo":s.push(e[t].idEvento);var u=e.findIndex(f);-1!==u?(o=e[u].fechaHora.substring(0,10).split("/"),r=e[u].fechaHora.substring(11,16).split(":")):(o=p(new Date),r=o.substring(11,16).split(":"),o=o.substring(0,10).split("/"));break;case"Alimenticio":d.push(e[t].idEvento);var u=e.findIndex(m);-1!==u?(o=e[u].fechaHora.substring(0,10).split("/"),r=e[u].fechaHora.substring(11,16).split(":")):(o=p(new Date),r=o.substring(11,16).split(":"),o=o.substring(0,10).split("/"))}n.addRows([[e[t].tipoEvento,new Date(l[2],parseInt(l[1])-1,l[0],c[0],c[1]),new Date(o[2],parseInt(o[1])-1,o[0],r[0],r[1])]])}i.draw(n)})}(),0===l.filtro.numCaravana&&(l.filtro.numCaravana=""),l.disabled="",l.disabledExportar=""),e.$parent.unBlockSpinner()})}function p(e){var o,r,a,i,n;return 1===(o=e.getDate().toString()).length&&(o="0"+o),1===(r=(e.getMonth()+1).toString()).length&&(r="0"+r),a=e.getFullYear().toString(),1===(i=e.getHours().toString()).length&&(i="0"+i),1===(n=e.getMinutes().toString()).length&&(n="0"+n),o+"/"+r+"/"+a+" "+i+":"+n}function f(e){return"Manejo"===e.tipoEvento&&-1===s.indexOf(e.idEvento)}function m(e){return"Alimenticio"===e.tipoEvento&&-1===d.indexOf(e.idEvento)}l.fechaDeHoy=new Date,$("#datetimepicker4").datetimepicker(),$("#datetimepicker5").datetimepicker()}angular.module("app").controller("consultarTrazabilidadController",e),e.$inject=["$scope","tipoEventoService","toastr","consultarTrazabilidadService","$state","exportador","$localStorage"]}(),function(){"use strict";function e(e,o){return{getEvento:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Evento/Get",params:{idEvento:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("detalleEventoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a){var i=e;window.scrollTo(0,0),i.disabled=!0,i.inicializar=(e.$parent.blockSpinner(),i.disabled=!0,i.itemsPorPagina=9,i.idEvento=r.id,void o.getEvento(r.id).then(function(o){i.evento=o,i.rowCollection=i.evento.listaBovinos,i.disabled=!1,angular.forEach(i.evento,function(e,o){0===parseInt(e)&&"idEvento"!==o&&(i.evento[o]="")}),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})),i.evento={}}angular.module("app").controller("detalleEventoController",e),e.$inject=["$scope","detalleEventoService","$stateParams","toastr"]}(),function(){"use strict";function e(e,o){return{getEventoForModificar:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Evento/GetEventoForModificacion",params:{idEvento:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},initModificacion:function(r,a,i,n){return e({method:"GET",url:o.getUrlServer()+"api/Evento/initEvento",params:{idEvento:r,usuario:a,idCampo:i,idRol:n},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},modificar:function(r,a){return e({method:"PUT",url:o.getUrlServer()+"api/Evento",params:{value:r,lista:a},headers:o.getHeadersServer()})},getRodeos:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Rodeo/GetList",params:{campo:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("modificarEventoService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n,t){var l=e;window.scrollTo(0,0),l.habilitar=!1,l.habilitarBtnAceptar=!1,l.showBotones=!0,l.inicializar=(l.showBotones=!0,e.$parent.blockSpinner(),l.habilitar=!1,l.habilitarBtnAceptar=!1,l.itemsPorPagina=9,l.idEvento=r.id,void o.initModificacion(r.id,t.usuarioInfo.usuario,n.usuarioInfo.codigoCampo,t.usuarioInfo.idRol).then(function(a){l.vacunas=a.vacunas,l.alimentos=a.alimentos,l.antibioticos=a.antibioticos,l.tiposEventos=a.tipoEvento,l.rowCollection=a.listaBovinos.listaBovinos,l.campos=a.campos,l.rodeos=a.rodeos,o.getEventoForModificar(r.id).then(function(o){l.evento=o,l.evento.idTipoEvento=l.evento.idTipoEvento.toString(),l.evento.idVacuna=l.evento.idVacuna.toString(),l.evento.idAlimento=l.evento.idAlimento.toString(),l.evento.idAntibiotico=l.evento.idAntibiotico.toString(),l.evento.idCampoDestino=l.evento.idCampoDestino.toString(),l.idRodeoDestino=l.evento.idRodeoDestino.toString(),"0"!==l.evento.idCampoDestino&&l.changeCampos(),angular.forEach(l.evento,function(e,o){0===parseInt(e)&&"idEvento"!==o&&(l.evento[o]="")}),e.$parent.unBlockSpinner(),l.habilitar=!0,l.habilitarBtnAceptar=!0},function(o){e.$parent.unBlockSpinner(),i.error("Ha ocurrido un error, reintentar","Error")})},function(o){e.$parent.unBlockSpinner(),i.error("Ha ocurrido un error, reintentar","Error")})),l.modificar=function(){d(),""===l.evento.cantidad?l.evento.cantidad=0:l.evento.cantidad=l.evento.cantidad.toString().replace(",",".");l.evento.fechaHora=l.evento.fechaHora.substring(6,10)+"/"+l.evento.fechaHora.substring(3,5)+"/"+l.evento.fechaHora.substring(0,2)+" "+function(e,o){var r=e;if("pm"===o)switch(e.substring(0,2)){case"01":r="13:"+r.substring(3,5);break;case"02":r="14:"+r.substring(3,5);break;case"03":r="15:"+r.substring(3,5);break;case"04":r="16:"+r.substring(3,5);break;case"05":r="17:"+r.substring(3,5);break;case"06":r="18:"+r.substring(3,5);break;case"07":r="19:"+r.substring(3,5);break;case"08":r="20:"+r.substring(3,5);break;case"09":r="21:"+r.substring(3,5);break;case"10":r="22:"+r.substring(3,5);break;case"11":r="23:"+r.substring(3,5)}return r}(l.evento.fechaHora.substring(11,16),l.evento.fechaHora.substring(17,19)),""===l.evento.idVacuna&&(l.evento.idVacuna=0);""===l.evento.idAntibiotico&&(l.evento.idAntibiotico=0);""===l.evento.idCampoDestino&&(l.evento.idCampoDestino=0);""===l.evento.idRodeoDestino&&(l.evento.idRodeoDestino=0);""===l.evento.idAlimento&&(l.evento.idAlimento=0);l.evento.idRodeoDestino=l.idRodeoDestino;for(var o=[],r=0;r<l.rowCollection.length;r++)o.push(l.rowCollection[r].idBovino);0===o.length?$("#modalConfirmEliminEvento").modal("show"):(e.$parent.blockSpinnerSave(),s(o))},l.eliminar=function(){for(var e=0;e<l.rowCollection.length;e++)l.rowCollection[e].idBovino===c&&l.rowCollection.splice(e,1);$("#modalConfirmEliminar").modal("hide")},l.openPopUp=function(e,o){c=e,l.nroCaravana=o,$("#modalConfirmEliminar").modal("show")},l.changeCampos=function(){var r="";l.idRodeoDestino=l.evento.idRodeoDestino.toString();for(var a=0;a<l.campos.length;a++)if(l.campos[a].idCampo===parseInt(l.evento.idCampoDestino)){r=l.campos[a].codigoCampo;break}e.$parent.blockSpinner(),o.getRodeos(r).then(function(o){l.rodeos=o;var r=!1;l.habilitarBtnAceptar=!0;for(var a=0;a<l.rodeos.length;a++)if(l.rodeos[a].idRodeo===parseInt(l.idRodeoDestino)){r=!0;break}r||(l.idRodeoDestino="",l.habilitarBtnAceptar=!1),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),i.error("Ha ocurrido un error, reintentar","Error")})},l.changeRodeos=function(){parseInt(l.evento.idRodeoDestino)>0&&(l.habilitarBtnAceptar=!0)},l.getFecha=d,l.modificarEvento=s,l.evento={},l.fechaDeHoy=new Date,$("#datetimepicker4").datetimepicker();var c=0;function s(r){o.modificar(l.evento,r.toString()).then(function(o){l.habilitar=!1,l.showBotones=!1,l.habilitarBtnAceptar=!1,i.success("Se modificó el evento con éxito ","Éxito"),$("#modalConfirmEliminEvento").modal("hide"),e.$parent.unBlockSpinnerSave()},function(o){e.$parent.unBlockSpinnerSave(),i.error("La operación no se pudo completar","Error"),$("#modalConfirmEliminEvento").modal("hide")})}function d(){l.evento.fechaHora=$("#datetimepicker4")[0].value,new Date(l.evento.fechaHora.substring(6,10),parseInt(l.evento.fechaHora.substring(3,5))-1,l.evento.fechaHora.substring(0,2))>new Date?(l.formModificarEvento.fechaEvento.$setValidity("max",!1),l.habilitarBtnAceptar=!1):(l.formModificarEvento.fechaEvento.$setValidity("max",!0),l.habilitarBtnAceptar=!0)}}angular.module("app").controller("modificarEventoController",e),e.$inject=["$scope","modificarEventoService","$stateParams","tipoEventoService","toastr","$localStorage","$sessionStorage"]}(),function(){"use strict";function e(e,o){return{inicializar:function(){return e({method:"GET",url:o.getUrlServer()+"api/Usuario/Init",headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},obtenerListaUsuarios:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Usuario/GetList",params:{filter:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},darBajaUser:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Usuario/DarBaja",params:{idUsuario:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},activarUser:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Usuario/Activar",params:{idUsuario:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},validarCantidadUsuariosPlan:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Usuario/ValidarCantUsuarios",params:{usuario:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("consultarUsuariosService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a,i,n,t){var l=e;window.scrollTo(0,0),l.deshabilitar=!1,l.disabledExportar="disabled";var c=0,s=0;function d(){e.$parent.blockSpinner(),l.disabled="disabled",l.disabledExportar="disabled",l.filtro.codigoCampo=i.usuarioInfo.codigoCampo,o.obtenerListaUsuarios(l.filtro).then(function(o){0===o.length?(l.rowCollection=[],r.info("No se ha encontrado ningún resultado para esta búsqueda","Aviso")):(l.rowCollection=o,l.deshabilitar=!1,l.disabledExportar=""),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})}function u(e){var o,r;return 1===(o=e.getDate().toString()).length&&(o="0"+o),1===(r=(e.getMonth()+1).toString()).length&&(r="0"+r),o+"/"+r+"/"+e.getFullYear().toString()}l.usuarios=[],l.filtro={},l.inicializar=(e.$parent.blockSpinner(),l.deshabilitar=!0,l.disabledExportar="disabled",l.itemsPorPagina=9,void o.inicializar().then(function(e){l.roles=e.roles,l.filtro.idRol="0",d()},function(o){e.$parent.unBlockSpinner(),r.error("Ha ocurrido un error, reintentar","Error")})),l.consultar=d,l.limpiarCampos=function(){l.filtro={},l.filtro.nombre="",l.filtro.apellido="",l.filtro.idRol="0",l.filtro.codigoCampo=i.usuarioInfo.codigoCampo,d()},l.exportarExcel=function(){var o=[];o.Titulos=[],o.Titulos[0]="Usuario",o.Titulos[1]="Nombre",o.Titulos[2]="Apellido",o.Titulos[3]="Fecha Alta",o.Titulos[4]="Fecha Baja";var i=[];i[0]="Usuario",i[1]="Nombre",i[2]="Apellido",i[3]="Fecha Alta",i[4]="Fecha Baja";var n=[];if(n[0]="usuario",n[1]="nombre",n[2]="apellido",n[3]="fechaAlta",n[4]="fechaBaja",l.rowCollection.length>0){var t=1;for(var c in void 0===l.filtro.numCaravana?o[0]="":o[0]=l.filtro.numCaravana,l.filtro){var s=typeof l.filtro[c];if((null===l.filtro[c]||"object"!==s)&&"$resolved"!==c&&"function"!==s&&"numCaravana"!==c)if("idCategoria"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.categorias.length;d++)if(l.filtro[c]===l.categorias[d].idCategoria||parseInt(l.filtro[c])===l.categorias[d].idCategoria){o[t]=l.categorias[d].nombre,t+=1;break}}else if("genero"===c)"2"===l.filtro[c]?(o[t]="Seleccione",t+=1):"0"===l.filtro[c]?(o[t]="Hembra",t+=1):(o[t]="Macho",t+=1);else if("idRaza"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.razas.length;d++)if(l.filtro[c]===l.razas[d].idRaza||parseInt(l.filtro[c])===l.razas[d].idRaza){o[t]=l.razas[d].nombre,t+=1;break}}else if("idRodeo"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.rodeos.length;d++)if(l.filtro[c]===l.rodeos[d].idRodeo||parseInt(l.filtro[c])===l.rodeos[d].idRodeo){o[t]=l.rodeos[d].nombre,t+=1;break}}else if("idEstado"===c){if("0"===l.filtro[c])o[t]="Seleccione",t+=1;else for(var d=0;d<l.estados.length;d++)if(l.filtro[c]===l.estados[d].idEstado||parseInt(l.filtro[c])===l.estados[d].idEstado){o[t]=l.estados[d].nombre,t+=1;break}}else"accionPeso"===c?"0"===l.filtro[c]?(o[t]="Seleccione",t+=1):"mayor"===l.filtro[c]?(o[t]="Mayor",t+=1):(o[t]="Menor",t+=1):(o[t]=e.filtro[c],t+=1)}void 0===l.filtro.peso&&(o[o.length]="");var p=new Date;p=u(p),a.exportarExcel("Bovinos"+p,l.rowCollection,i,o,n,"Bovinos",function(){r.success("Se ha exportado con Éxito","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.exportarPDF=function(){var o=[];o.Titulos=[],o.Titulos[0]="Usuario",o.Titulos[1]="Nombre",o.Titulos[2]="Apellido",o.Titulos[3]="Fecha Alta",o.Titulos[4]="Fecha Baja";var i=[];if(i[0]="usuario",i[1]="nombre",i[2]="apellido",i[3]="fechaAlta",i[4]="fechaBaja",l.rowCollection.length>0){var n=1;for(var t in void 0===l.filtro.numCaravana?o[0]="":o[0]=l.filtro.numCaravana,l.filtro){var c=typeof l.filtro[t];if((null===l.filtro[t]||"object"!==c)&&"$resolved"!==t&&"function"!==c&&"numCaravana"!==t)if("idCategoria"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.categorias.length;s++)if(l.filtro[t]===l.categorias[s].idCategoria||parseInt(l.filtro[t])===l.categorias[s].idCategoria){o[n]=l.categorias[s].nombre,n+=1;break}}else if("genero"===t)"2"===l.filtro[t]?(o[n]="Seleccione",n+=1):"0"===l.filtro[t]?(o[n]="Hembra",n+=1):(o[n]="Macho",n+=1);else if("idRaza"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.razas.length;s++)if(l.filtro[t]===l.razas[s].idRaza||parseInt(l.filtro[t])===l.razas[s].idRaza){o[n]=l.razas[s].nombre,n+=1;break}}else if("idRodeo"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.rodeos.length;s++)if(l.filtro[t]===l.rodeos[s].idRodeo||parseInt(l.filtro[t])===l.rodeos[s].idRodeo){o[n]=l.rodeos[s].nombre,n+=1;break}}else if("idEstado"===t){if("0"===l.filtro[t])o[n]="Seleccione",n+=1;else for(var s=0;s<l.estados.length;s++)if(l.filtro[t]===l.estados[s].idEstado||parseInt(l.filtro[t])===l.estados[s].idEstado){o[n]=l.estados[s].nombre,n+=1;break}}else"accionPeso"===t?"0"===l.filtro[t]?(o[n]="Seleccione",n+=1):"mayor"===l.filtro[t]?(o[n]="Mayor",n+=1):(o[n]="Menor",n+=1):(o[n]=e.filtro[t],n+=1)}void 0===l.filtro.peso&&(o[o.length]="");var d=new Date;d=u(d);var p="<html><head></head><body>";if(p+="<h1 style='align:center;'>Bovinos</h1>",p+="<div><table border='1px' style='font-size:6px; width:6000px;'>",null!==l.filtro){for(var f="<thead><tr>",n=0;n<o.Titulos.length;n++)f+="<td bgcolor='black' style='text-align:center; vertical-align:center'><b><font color='white'>"+o.Titulos[n]+"</font></b></td>";f+="</tr></thead>";for(var m="<tr>",n=0;n<o.length;n++)if(null===o[n]||"object"!=typeof o[n]){var v=null!==o[n]?o[n]:"";m+="<td style='text-align:center; vertical-align:center'> "+v+" </td>"}m+="</tr></tbody>";var g=f.concat(m.toString()).concat("</table></div>");p+=g.toString()}p+="<div style='border-width: 2px; border-style: dotted; padding: 1em; font-size:120%;line-height: 1.5em;'><table border='1px' style='font-size:5px; width:6000px'>";var h="<thead><tr>";h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Nro Caravana</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Categoría</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Sexo</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Raza</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Rodeo</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Estado</font></b></td>",h+="<td style='width:500; height:50px; text-align:center; vertical-align:center;' bgcolor='black'><b><font color='white'>Peso</font></b></td>",h+="</tr></thead><tbody>";for(var m="<tr>",b=l.rowCollection,s=0;s<b.length;s++)for(var t in b[s]){if(!b[s].hasOwnProperty(t)||"$$hashKey"===t){m+="</tr>";break}if(i.indexOf(t)>-1){var v=""!==b[s][t]?b[s][t]:"";m+="<td style='text-align:center; vertical-align:center'> "+v+" </td>"}}p+="</tbody>";var S=h.concat(m.toString()).concat("</table></div>");p+=S.toString(),p+="</body></html>",a.exportarPDF("Bovinos"+d,p,function(){r.success("Se ha exportado con Éxito.","ÉXITO")},function(e){l.showSpinner=!1,r.error("Ha ocurrido un error, reintentar","Error")})}},l.openPopUp=function(e){l.usuario=e.usuario,c=e.idUsuario,$("#modalConfirmEliminacionUser").modal("show")},l.openPopUpActivar=function(e){l.usuarioActivo=e.usuario,s=e.idUsuario,$("#modalConfirmActivacionUser").modal("show")},l.eliminar=function(){e.$parent.blockSpinnerSave(),o.darBajaUser(c).then(function(){$("#modalConfirmEliminacionUser").modal("hide"),r.success("Se ha dado de baja al usuario con éxito","Éxito"),e.$parent.unBlockSpinnerSave(),n.reload()},function(o){$("#modalConfirmEliminacionUser").modal("hide"),e.$parent.unBlockSpinnerSave(),r.error("Ha ocurrido un error, reintentar","Error")})},l.activar=function(){e.$parent.blockSpinnerSave(),o.activarUser(s).then(function(){$("#modalConfirmActivacionUser").modal("hide"),r.success("Se ha activado al usuario con éxito","Éxito"),e.$parent.unBlockSpinnerSave(),n.reload()},function(o){$("#modalConfirmActivacionUser").modal("hide"),e.$parent.unBlockSpinnerSave(),r.error("Ha ocurrido un error, reintentar","Error")})},l.validarCantUsuarios=function(){e.$parent.blockSpinner(),o.validarCantidadUsuariosPlan(t.usuarioInfo.usuario).then(function(o){o.resultado?n.go("home.registrarUsuario"):(r.info("No puede agregar mas usuarios, verifique su plan contratado.","Aviso"),e.$parent.unBlockSpinner())},function(o){e.$parent.unBlockSpinner(),r.error("Se ha producido un error, reintentar.")})}}angular.module("app").controller("consultarUsuariosController",e),e.$inject=["$scope","consultarUsuariosService","toastr","exportador","$localStorage","$state","$sessionStorage"]}(),function(){"use strict";function e(e,o){return{getUsuario:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Usuario/GetDetalle",params:{idUsuario:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("detalleUsuariosService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a){var i=e;function n(){e.$parent.blockSpinner(),o.getUsuario(r.id).then(function(o){i.usuario=o,e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),a.error("Ha ocurrido un error, reintentar","Error")})}window.scrollTo(0,0),i.inicializar=n,n()}angular.module("app").controller("detalleUsuariosController",e),e.$inject=["$scope","detalleUsuariosService","$stateParams","toastr"]}(),function(){"use strict";function e(e,o){return{getUsuario:function(r){return e({method:"GET",url:o.getUrlServer()+"api/Usuario/Get",params:{idUsuario:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})},modificar:function(r){return e({method:"PUT",url:o.getUrlServer()+"api/Usuario",params:{usuario:r},headers:o.getHeadersServer()}).then(function(e){return e.data||[]})}}}angular.module("app").factory("modificarUsuariosService",e),e.$inject=["$http","portalService"]}(),function(){"use strict";function e(e,o,r,a){var i=e;function n(){e.$parent.blockSpinner(),i.roles=[],i.roles.push({idRol:2,nombre:"Ingeniero"}),i.roles.push({idRol:3,nombre:"Peón"}),r.getUsuario(o.id).then(function(o){i.usuario=o,i.usuario.idRol=i.usuario.idRol.toString(),e.$parent.unBlockSpinner()},function(o){e.$parent.unBlockSpinner(),i.habilitar=!1,a.error("Ha ocurrido un error, reintentar","Error")})}window.scrollTo(0,0),i.btnVolver="Cancelar",i.habilitar=!0,i.inicializar=n,i.modificar=function(){e.$parent.blockSpinnerSave(),r.modificar(i.usuario).then(function(o){i.habilitar=!1,e.$parent.unBlockSpinnerSave(),a.success("Se modificó el usuario con éxito ","Éxito")},function(o){e.$parent.unBlockSpinnerSave(),i.habilitar=!1,a.error("Ha ocurrido un error, reintentar","Error")})},n()}angular.module("app").controller("modificarUsuariosController",e),e.$inject=["$scope","$stateParams","modificarUsuariosService","toastr"]}(),angular.module("app").factory("registrarUsuariosService",function(e,o){return e(o.getUrlServer()+"api/Usuario/",{},{inicializar:{method:"GET",url:o.getUrlServer()+"api/Usuario/Init",headers:o.getHeadersServer(),isArray:!1},save:{method:"POST",transformRequest:function(e){var o=new FormData;return o.append("usuario",angular.toJson(e)),e.imagen&&o.append("file0",e.imagen),o},headers:o.getContentUndefined()},validarCantCamposUsuario:{method:"GET",url:o.getUrlServer()+"api/Campo/validarCantCamposXUsuario",params:{usuario:"@usuario"},headers:o.getHeadersServer(),isArray:!1}})}),function(){"use strict";function e(e,o,r,a){var i=e;function n(){e.$parent.blockSpinner(),i.usuario=new o,i.roles=[],i.roles.push({idRol:2,nombre:"Ingeniero"}),i.roles.push({idRol:3,nombre:"Peón"}),e.$parent.unBlockSpinner()}window.scrollTo(0,0),i.btnVolver="Cancelar",i.habilitar=!0,i.imageToUpload=[],i.toDelete=[],i.inicializar=n,i.registrar=function(){e.$parent.blockSpinnerSave(),i.habilitar=!1,i.imageToUpload[0]&&(i.usuario.imagen=i.imageToUpload[0]);i.usuario.codigoCampo=r.usuarioInfo.codigoCampo,i.usuario.$save(function(o){a.success("Se agrego con éxito el usuario ","Éxito"),i.btnVolver="Volver",e.$parent.unBlockSpinnerSave()},function(o){e.$parent.unBlockSpinnerSave(),"Error: El usuario ya existe para este campo"===o.data?(i.habilitar=!0,a.warning("El usuario ya existe para este campo","Advertencia")):a.error("Ha ocurrido un error, reintentar","Error")})},i.validarContrasenias=function(){i.usuario.pass===i.contraseniaRepetida.contraseniaRepetida?i.formRegistrarUsuario.contraseniaRepetida.$setValidity("min",!0):i.formRegistrarUsuario.contraseniaRepetida.$setValidity("min",!1)},i.selectUnselectImage=function(o){var r=i.toDelete.indexOf(o);-1!=r?i.toDelete.splice(r,1):e.toDelete.push(o)},i.ImageClass=function(e){return-1!=i.toDelete.indexOf(e)},i.deleteImagefromModel=function(){i.toDelete!=[]&&i.toDelete.length>0?angular.forEach(e.toDelete,function(e,o){var r=i.imageToUpload.indexOf(e),a=i.toDelete.indexOf(e);-1!=r&&(i.imageToUpload.splice(r,1),i.toDelete.splice(a,1))}):a.info("Debe seleccionar una imágen para borrar","Aviso")},i.UploadImg=function(o,r){e.imageToUpload=o},n()}angular.module("app").controller("registrarUsuariosController",e),e.$inject=["$scope","registrarUsuariosService","$localStorage","toastr"]}(),function(){"use strict";angular.module("app").config(function(e,o){o.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"loginController"}),e.state("seleccionCampo",{url:"/login/seleccion-campo",templateUrl:"app/seleccion-campo/seleccion-campo.html",controller:"seleccionCampoController"}),e.state("registrarCampo",{url:"/registrarCampo",templateUrl:"app/campo/registrar-campo.html",controller:"registrarCampoController"}),e.state("home",{url:"/home",templateUrl:"app/master.html",controller:"homeController",data:{pageTitle:"Farmix - Home",bodyClass:"master"}}),e.state("home.inicio",{url:"/inicio",templateUrl:"app/inicio/inicio.html",controller:"inicioController",data:{pageTitle:"Farmix - Inicio"}}),e.state("home.cerrarSesion",{url:"/cerrarSesion",templateUrl:"",controller:""}),e.state("home.reportes",{url:"/reportes",templateUrl:"app/reportes/consultar-reportes.html",controller:"consultarReportesController"}),e.state("home.reporteBovino",{url:"/reportes/bovinos",templateUrl:"app/reportes/reporte-bovino/reporte-bovino.html",controller:"reporteBovinoController"}),e.state("home.reporteInseminacion",{url:"/reportes/inseminaciones",templateUrl:"app/reportes/reporte-inseminacion/reporte-inseminacion.html",controller:"reporteInseminacionController"}),e.state("home.conflictos",{url:"/conflictos",templateUrl:"app/conflicto/consultar-conflicto/consultar-conflicto.html",controller:"consultarConflictoController"}).state("home.resolverConflicto",{url:"/conflicto/resolver",params:{idTacto:null,fechaTacto:null,idTactoConfl:null,fechaTactoConfl:null,idInseminacion:null,idInseminConfl:null},templateUrl:"app/conflicto/resolver-conflicto/resolver-conflicto.html",controller:"resolverConflictoController"}),e.state("home.bovino",{url:"/bovino",templateUrl:"app/bovino/consultar-bovino/consultar-bovino.html",controller:"consultarBovinoController",data:{pageTitle:"Farmix - Consulta de Bovinos"}}).state("home.registrarBovino",{url:"/bovino/registrar",templateUrl:"app/bovino/registrar-bovino/registrar-bovino.html",controller:"registrarBovinoController",data:{pageTitle:"Farmix - Registrar Bovino"}}).state("home.detalleBovino",{url:"/bovino/detalle",params:{id:null,evento:null,proviene:null,fecha:null,desde:null},templateUrl:"app/bovino/detalle-bovino/detalle-bovino.html",controller:"detalleBovinoController",data:{pageTitle:"Farmix - Detalle de Bovino"}}).state("home.modificarBovino",{url:"/bovino/modificacion",params:{id:null},templateUrl:"app/bovino/modificar-bovino/modificar-bovino.html",controller:"modificarBovinoController",data:{pageTitle:"Farmix - Modificación de Bovino"}}).state("home.eliminarBovino",{url:"/bovino/darDeBaja",params:{id:null},templateUrl:"app/bovino/eliminar-bovino/eliminar-bovino.html",controller:"eliminarBovinoController"}),e.state("home.trazabilidad",{url:"/trazabilidad",templateUrl:"app/trazabilidad/consultar-trazabilidad/consultar-trazabilidad.html",controller:"consultarTrazabilidadController",data:{pageTitle:"Farmix - Consulta Trazabilidad"}}).state("home.detalleEvento",{url:"/evento/detalle",params:{id:null},templateUrl:"app/trazabilidad/detalle-evento/detalle-evento.html",controller:"detalleEventoController"}).state("home.modificarEvento",{url:"/evento/modificar",params:{id:null},templateUrl:"app/trazabilidad/modificar-evento/modificar-evento.html",controller:"modificarEventoController"}),e.state("home.inseminacion",{url:"/inseminacion",templateUrl:"app/inseminacion/consultar-inseminacion/consultar-inseminacion.html",controller:"consultarInseminacionController"}).state("home.modificarInseminacion",{url:"/inseminacion/modificar",params:{fecha:null,desde:null},templateUrl:"app/inseminacion/modificar-inseminacion/modificar-inseminacion.html",controller:"modificarInseminacionController"}).state("home.detalleInseminacion",{url:"/inseminacion/detalle",params:{fecha:null,desde:null},templateUrl:"app/inseminacion/detalle-inseminacion/detalle-inseminacion.html",controller:"detalleInseminacionController"}),e.state("home.usuarios",{url:"/usuarios",templateUrl:"app/usuarios/consultar-usuarios/consultar-usuarios.html",controller:"consultarUsuariosController"}).state("home.modificarUsuario",{url:"/usuarios/modificacion",params:{id:null},templateUrl:"app/usuarios/modificar-usuarios/modificar-usuarios.html",controller:"modificarUsuariosController"}).state("home.detalleUsuario",{url:"/usuarios/detalle",params:{id:null},templateUrl:"app/usuarios/detalle-usuarios/detalle-usuarios.html",controller:"detalleUsuariosController"}).state("home.registrarUsuario",{url:"/usuarios/registro",templateUrl:"app/usuarios/registrar-usuarios/registrar-usuarios.html",controller:"registrarUsuariosController"}),e.state("home.configuracion",{url:"/configuracion",templateUrl:"app/configuracion/configuracion.html",controller:"configuracionController"})})}();